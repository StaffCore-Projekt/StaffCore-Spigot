Index: src/de/lacodev/rsystem/utils/TranslationHandler.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.utils;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.URL;\r\nimport java.nio.charset.Charset;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\nimport org.json.simple.parser.ParseException;\r\n\r\npublic class TranslationHandler {\r\n\t\r\n\t// Handler for translate.lacodev.de Services\r\n\t\r\n\tprivate HashMap<String, String> fallback = new HashMap<>();\r\n\tprivate HashMap<String, String> language = new HashMap<>();\r\n\tprivate HashMap<String, String> custom = new HashMap<>();\r\n\tprivate ArrayList<String> keys = new ArrayList<>();\r\n\t\r\n\tpublic TranslationHandler() {\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\tpublic void init() {\r\n\t\t\r\n\t\tfallback.clear();\r\n\t\t\r\n\t\tJSONObject message_keys = readJsonFromUrl(\"https://translate.lacodev.de/api/v1/keys\");\r\n\t\tint totalKeys = message_keys.size();\r\n\t\t\r\n\t\tfor(int i = 1; i <= totalKeys; i++) {\r\n\t\t\t\r\n\t\t\tJSONObject data = (JSONObject) message_keys.get(String.valueOf(i));\r\n\t\t\t\r\n\t\t\tkeys.add(data.get(\"key\").toString());\r\n\t\t}\r\n\t\t\r\n\t\tJSONObject translation = readJsonFromUrl(\"https://translate.lacodev.de/api/v1/all/lang/us\");\r\n\t\t\r\n\t\tfor(String key : keys) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t\r\n\t\t\t\tJSONObject msg = (JSONObject) translation.get(key);\r\n\t\t\t\t\r\n\t\t\t\tfallback.put(key, msg.get(\"translation\").toString());\r\n\t\t\t\t\r\n\t\t\t} catch (NullPointerException e) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §aSuccessfully §8cached §a\" + fallback.size() + \" Fallback-Translations§8(§7US§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void fetch(String lang) {\r\n\t\tlanguage.clear();\r\n\t\t\r\n\t\tJSONObject translation = readJsonFromUrl(\"https://translate.lacodev.de/api/v1/all/lang/\"+ lang);\r\n\t\t\r\n\t\tfor(String key : keys) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tJSONObject msg = (JSONObject) translation.get(key);\r\n\t\t\t\t\r\n\t\t\t\tlanguage.put(key, msg.get(\"translation\").toString());\r\n\t\t\t} catch(NullPointerException e) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §aSuccessfully §8cached §a\" + language.size() + \" Translations§8(§7\"+ lang.toUpperCase() +\"§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void fetchCustom(String restapikey) {\r\n\t\tcustom.clear();\r\n\t\t\r\n\t\tJSONObject translation = readJsonFromUrl(\"https://translate.lacodev.de/api/v1/restricted/key/\"+ restapikey);\r\n\t\t\r\n\t\tfor(String key : keys) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tJSONObject msg = (JSONObject) translation.get(key);\r\n\t\t\t\t\r\n\t\t\t\tcustom.put(key, msg.get(\"text_message\").toString());\r\n\t\t\t} catch(NullPointerException e) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §aSuccessfully §8cached §a\" + custom.size() + \" Messages§8(§7CUSTOM§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic String getTranslation(String key) {\r\n\t\t\r\n\t\tif(custom.containsKey(key)) {\r\n\t\t\treturn custom.get(key);\r\n\t\t} else if(!language.containsKey(key)) {\r\n\t\t\treturn fallback.get(key);\r\n\t\t} else {\r\n\t\t\treturn language.get(key);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate JSONObject readJsonFromUrl(String url) {\r\n\t\tJSONParser parser = new JSONParser();\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tJSONObject jsonObject = (JSONObject) parser.parse(new InputStreamReader(new URL(url).openStream(), Charset.forName(\"UTF-8\")));\r\n\t\t\t\r\n\t\t\treturn jsonObject;\r\n\t\t} catch (IOException | ParseException | ClassCastException e) {\r\n\t\t\t\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/utils/TranslationHandler.java b/src/de/lacodev/rsystem/utils/TranslationHandler.java
--- a/src/de/lacodev/rsystem/utils/TranslationHandler.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/utils/TranslationHandler.java	(date 1610307363355)
@@ -8,6 +8,7 @@
 import java.util.HashMap;
 
 import org.bukkit.Bukkit;
+import org.bukkit.ChatColor;
 import org.json.simple.JSONObject;
 import org.json.simple.parser.JSONParser;
 import org.json.simple.parser.ParseException;
@@ -55,7 +56,7 @@
 		}
 		
 		Bukkit.getConsoleSender().sendMessage("");
-		Bukkit.getConsoleSender().sendMessage("§cSystem §8» §aSuccessfully §8cached §a" + fallback.size() + " Fallback-Translations§8(§7US§8)");
+		Bukkit.getConsoleSender().sendMessage(ChatColor.RED + "System " + ChatColor.DARK_GRAY + "» " + ChatColor.GREEN + "Successfully " + ChatColor.DARK_GRAY + "cached " + ChatColor.GREEN + fallback.size() + " Fallback-Translations" + ChatColor.DARK_GRAY + "(" + ChatColor.GRAY + "US" + ChatColor.DARK_GRAY + ")");
 		Bukkit.getConsoleSender().sendMessage("");
 		
 	}
@@ -77,7 +78,7 @@
 		}
 		
 		Bukkit.getConsoleSender().sendMessage("");
-		Bukkit.getConsoleSender().sendMessage("§cSystem §8» §aSuccessfully §8cached §a" + language.size() + " Translations§8(§7"+ lang.toUpperCase() +"§8)");
+		Bukkit.getConsoleSender().sendMessage(ChatColor.RED + "System " + ChatColor.DARK_GRAY + "» " + ChatColor.GREEN + "Successfully " + ChatColor.DARK_GRAY + "cached " + ChatColor.GREEN + language.size() + " Translations" + ChatColor.DARK_GRAY + "(" +ChatColor.GRAY + lang.toUpperCase() + ChatColor.DARK_GRAY + ")");
 		Bukkit.getConsoleSender().sendMessage("");
 		
 	}
@@ -99,7 +100,7 @@
 		}
 		
 		Bukkit.getConsoleSender().sendMessage("");
-		Bukkit.getConsoleSender().sendMessage("§cSystem §8» §aSuccessfully §8cached §a" + custom.size() + " Messages§8(§7CUSTOM§8)");
+		Bukkit.getConsoleSender().sendMessage(ChatColor.RED + "System" + ChatColor.DARK_GRAY + "» " + ChatColor.GREEN + "Successfully " + ChatColor.DARK_GRAY + "cached " + ChatColor.GREEN + custom.size() + " Messages" + ChatColor.DARK_GRAY + "(" + ChatColor.GRAY + "CUSTOM" + ChatColor.DARK_GRAY + ")");
 		Bukkit.getConsoleSender().sendMessage("");
 		
 	}
Index: src/de/lacodev/rsystem/staffcorelistener/Listener_Report.java
===================================================================
diff --git a/src/de/lacodev/rsystem/staffcorelistener/Listener_Report.java b/src/de/lacodev/rsystem/staffcorelistener/Listener_Report.java
deleted file mode 100644
--- a/src/de/lacodev/rsystem/staffcorelistener/Listener_Report.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ /dev/null	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
@@ -1,27 +0,0 @@
-package de.lacodev.rsystem.staffcorelistener;
-
-import de.lacodev.staffcore.api.events.ReportClaimEvent;
-import de.lacodev.staffcore.api.events.ReportCreateEvent;
-import de.lacodev.staffcore.api.events.ReportReasonCreateEvent;
-import de.lacodev.staffcore.api.events.ReportReasonDeleteEvent;
-import org.bukkit.event.EventHandler;
-import org.bukkit.event.Listener;
-
-public class Listener_Report implements Listener {
-
-    @EventHandler
-    public void onReportClaim(ReportClaimEvent event) {
-    }
-
-    @EventHandler
-    public void onReportCreate(ReportCreateEvent event) {
-    }
-
-    @EventHandler
-    public void onReportReasonCreate(ReportReasonCreateEvent event) {
-    }
-
-    @EventHandler
-    public void onReportReasonDelete(ReportReasonDeleteEvent event) {
-    }
-}
Index: src/de/lacodev/rsystem/listeners/Listener_Inventories.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.listeners;\r\n\r\nimport java.sql.SQLException;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.enchantments.Enchantment;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.inventory.InventoryClickEvent;\r\nimport org.bukkit.inventory.ItemFlag;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.SkullMeta;\r\nimport com.connorlinfoot.actionbarapi.ActionBarAPI;\r\n\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.enums.XMaterial;\r\nimport de.lacodev.rsystem.utils.BanManager;\r\nimport de.lacodev.rsystem.utils.InventoryHandler;\r\nimport de.lacodev.rsystem.utils.PageManager;\r\nimport de.lacodev.rsystem.utils.PanelManager;\r\nimport de.lacodev.rsystem.utils.ReportManager;\r\nimport de.lacodev.rsystem.utils.SystemManager;\r\nimport de.lacodev.rsystem.utils.TicketManager;\r\nimport net.md_5.bungee.api.chat.ClickEvent;\r\nimport net.md_5.bungee.api.chat.TextComponent;\r\nimport net.md_5.bungee.api.chat.ClickEvent.Action;\r\n\r\npublic class Listener_Inventories implements Listener {\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\t@EventHandler\r\n\tpublic void onInv(InventoryClickEvent e) throws SQLException {\r\n\t\tPlayer p = (Player) e.getWhoClicked();\r\n\t\t\r\n\t\tif(e.getView().getTitle().startsWith(Main.getMSG(\"Messages.Ticket-System.List.Inventory-Title\"))) {\r\n\r\n\t\t\te.setCancelled(true);\r\n\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\r\n\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\r\n\t\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\r\n\t\t\t\t\t\tp.sendMessage(\"\");\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + e.getCurrentItem().getItemMeta().getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tString name = e.getCurrentItem().getItemMeta().getDisplayName();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tString id = name.substring(15, name.length() - 3);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tTextComponent tc = new TextComponent();\r\n\t\t\t\t\t\ttc.setText(Main.getPrefix() + Main.getMSG(\"Messages.Ticket-System.Open-In-Browser-Button\"));\r\n\t\t\t\t\t\ttc.setClickEvent(new ClickEvent(Action.OPEN_URL, Main.getPermissionNotice(\"TicketSystem.WebInterface-URL\") + id));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tp.spigot().sendMessage(tc);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tp.sendMessage(\"\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tint page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());\r\n\r\n\t\t\t\t\tif (e.getSlot() == 46) {\r\n\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ticket-System.Inventory.PreviousPage.NotAvailable\"))) {\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tTicketManager.openTicketOverview(p, page - 1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (e.getSlot() == 52) {\r\n\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ticket-System.Inventory.NextPage.NotAvailable\"))) {\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tTicketManager.openTicketOverview(p, page + 1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().startsWith(Main.getMSG(\"Messages.Report-System.Inventory.Title\"))) {\r\n\r\n\t\t\te.setCancelled(true);\r\n\r\n\t\t\t\r\n\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\r\n\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\r\n\t\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\r\n\t\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Report-System.Inventory.Title\"), \"\");\r\n\r\n\t\t\t\t\t\tString f = ChatColor.stripColor(s);\r\n\r\n\r\n\r\n\t\t\t\t\t\tPlayer target = Bukkit.getPlayer(f);\r\n\r\n\r\n\r\n\t\t\t\t\t\tif(target != null) {\r\n\r\n\t\t\t\t\t\t\tif(target != p) {\r\n\r\n\t\t\t\t\t\t\t\tReportManager.createReport(p.getName(), target, ChatColor.stripColor(e.getCurrentItem().getItemMeta().getDisplayName()));\r\n\r\n\t\t\t\t\t\t\t\tp.closeInventory();\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Report-System.Cannot-report-self\"));\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Report-System.Target-offline\"));\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tint page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());\r\n\r\n\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Report-System.Inventory.Title\"), \"\");\r\n\r\n\t\t\t\t\tString f = ChatColor.stripColor(s);\r\n\r\n\r\n\r\n\t\t\t\t\tPlayer target = Bukkit.getPlayer(f);\r\n\r\n\r\n\t\t\t\t\tif (e.getSlot() == 46) {\r\n\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Report-System.Inventory.PreviousPage.NotAvailable\"))) {\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tReportManager.openPagedReportInv(p, target.getName(), page-1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (e.getSlot() == 52) {\r\n\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Report-System.Inventory.NextPage.NotAvailable\"))) {\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tReportManager.openPagedReportInv(p, target.getName(), page+1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().startsWith(Main.getMSG(\"Messages.Ban-System.Inventory.Title\"))) {\r\n\t\t\te.setCancelled(true);\r\n\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\t\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Ban-System.Inventory.Title\"), \"\");\r\n\t\t\t\t\t\tString reason = e.getCurrentItem().getItemMeta().getDisplayName();\r\n\t\t\t\t\t\treason = ChatColor.stripColor(reason);\r\n\t\t\t\t\t\tString target = ChatColor.stripColor(s);\r\n\r\n\t\t\t\t\t\tif (!BanManager.isBanned(SystemManager.getUUIDByName(target))) {\r\n\t\t\t\t\t\t\tif(target != p.getName()) {\r\n\t\t\t\t\t\t\t\tif(Main.getInstance().getConfig().getBoolean(\"Ban-System.Per-Reason-Permission.Toggle\")) {\r\n                            \t\tif(p.hasPermission(Main.getInstance().getConfig().getString(\"Ban-System.Per-Reason-Permission.Prefix-For-Permission\") + BanManager.getIDFromBanReason(reason))) {\r\n        \t\t\t\t\t\t\t\tBanManager.submitBan(SystemManager.getUUIDByName(target), reason, p.getUniqueId().toString());\r\n        \t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n        \t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Created\"));\r\n        \t\t\t\t\t\t\t\t} else {\r\n        \t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Created\"));\r\n        \t\t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\t\tp.closeInventory();\r\n                            \t\t} else {\r\n                            \t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.No-Permission\").replace(\"%permission%\", Main.getInstance().getConfig().getString(\"Ban-System.Per-Reason-Permission.Prefix-For-Permission\") + BanManager.getIDFromBanReason(reason)));\r\n                            \t\t\tp.closeInventory();\r\n                            \t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tBanManager.submitBan(SystemManager.getUUIDByName(target), reason, p.getUniqueId().toString());\r\n\t\t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tp.closeInventory();\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Cannot-ban-self\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Already-Banned\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.Already-Banned\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tint page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());\r\n\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Ban-System.Inventory.Title\"), \"\");\r\n\t\t\t\t\tString target = ChatColor.stripColor(s);\r\n\t\t\t\t\tif (e.getSlot() == 46) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ban-System.Inventory.PreviousPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBanManager.openPagedBanInv(p, target, page-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.getSlot() == 52) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ban-System.Inventory.NextPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBanManager.openPagedBanInv(p, target, page+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().startsWith(\"§cStaffCore §8- §7Protections\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\tPanelManager manager = new PanelManager();\r\n\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\t\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(\" §8| §cUnprotected\")) {\r\n\t\t\t\t\t\t\tString s = e.getCurrentItem().getItemMeta().getDisplayName().replace(\" §8| §cUnprotected\", \"\");\r\n\t\t\t\t\t\t\tString playername = ChatColor.stripColor(s);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tSystemManager.changeProtectionState(playername);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tItemStack player = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\t\t\t\t\t\tSkullMeta meta = (SkullMeta) player.getItemMeta();\r\n\t\t\t\t\t\t\tmeta.setOwner(playername);\r\n\t\t\t\t\t\t\tif(SystemManager.isProtected(SystemManager.getUUIDByName(playername))) {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + playername + \" §8| §aProtected\");\r\n\t\t\t\t\t\t\t\tmeta.addItemFlags(ItemFlag.HIDE_ENCHANTS);\r\n\t\t\t\t\t\t\t\tmeta.addEnchant(Enchantment.DURABILITY, 1, true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + playername + \" §8| §cUnprotected\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.setItemMeta(meta);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\te.getClickedInventory().setItem(e.getSlot(), player);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(\" §8| §aProtected\")) {\r\n\t\t\t\t\t\t\tString s = e.getCurrentItem().getItemMeta().getDisplayName().replace(\" §8| §aProtected\", \"\");\r\n\t\t\t\t\t\t\tString playername = ChatColor.stripColor(s);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tSystemManager.changeProtectionState(playername);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tItemStack player = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\t\t\t\t\t\tSkullMeta meta = (SkullMeta) player.getItemMeta();\r\n\t\t\t\t\t\t\tmeta.setOwner(playername);\r\n\t\t\t\t\t\t\tif(SystemManager.isProtected(SystemManager.getUUIDByName(playername))) {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + playername + \" §8| §aProtected\");\r\n\t\t\t\t\t\t\t\tmeta.addItemFlags(ItemFlag.HIDE_ENCHANTS);\r\n\t\t\t\t\t\t\t\tmeta.addEnchant(Enchantment.DURABILITY, 1, true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + playername + \" §8| §cUnprotected\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.setItemMeta(meta);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\te.getClickedInventory().setItem(e.getSlot(), player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§c◄ Go back\")) {\r\n\t\t\t\t\t\tmanager.openPlayerManagement(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());\r\n\t\t\t\t\tif (e.getSlot() == 46) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ban-System.Inventory.PreviousPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmanager.openProtectionInventory(p, page - 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.getSlot() == 52) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Ban-System.Inventory.NextPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmanager.openProtectionInventory(p, page + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(e.getView().getTitle().startsWith(Main.getMSG(\"Messages.Mute-System.Inventory.Title\"))) {\r\n\t\t\te.setCancelled(true);\r\n\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\t\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Mute-System.Inventory.Title\"), \"\");\r\n\t\t\t\t\t\tString reason = e.getCurrentItem().getItemMeta().getDisplayName();\r\n\t\t\t\t\t\treason = ChatColor.stripColor(reason);\r\n\t\t\t\t\t\tString target = ChatColor.stripColor(s);\r\n\r\n\t\t\t\t\t\tif (!BanManager.isMuted(SystemManager.getUUIDByName(target))) {\r\n\t\t\t\t\t\t\tif(target != p.getName()) {\r\n\t\t\t\t\t\t\t\tif(Main.getInstance().getConfig().getBoolean(\"Mute-System.Per-Reason-Permission.Toggle\")) {\r\n\t\t\t\t\t\t\t\t\tif(p.hasPermission(Main.getInstance().getConfig().getString(\"Mute-System.Per-Reason-Permission.Prefix-For-Permission\") + BanManager.getIDFromMuteReason(reason))) {\r\n\t\t\t\t\t\t\t\t\t\tif(BanManager.submitMute(SystemManager.getUUIDByName(target), reason, p.getUniqueId().toString())) {\r\n\t\t\t\t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tp.closeInventory();\t\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Error\"));\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Error\"));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tp.closeInventory();\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.No-Permission\").replace(\"%permission%\", Main.getInstance().getConfig().getString(\"Ban-System.Per-Reason-Permission.Prefix-For-Permission\") + BanManager.getIDFromMuteReason(reason)));\r\n\t\t\t\t\t\t\t\t\t\tp.closeInventory();\t\r\n                            \t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif(BanManager.submitMute(SystemManager.getUUIDByName(target), reason, p.getUniqueId().toString())) {\r\n\t\t\t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Created\"));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tp.closeInventory();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Error\"));\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Error\"));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Cannot-mute-self\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (Main.getInstance().actionbar) {\r\n\t\t\t\t\t\t\t\tActionBarAPI.sendActionBar(p, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Already-Muted\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Already-Muted\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tint page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());\r\n\t\t\t\t\tString s = e.getView().getTitle().replace(Main.getMSG(\"Messages.Mute-System.Inventory.Title\"), \"\");\r\n\t\t\t\t\tString target = ChatColor.stripColor(s);\r\n\t\t\t\t\tif (e.getSlot() == 46) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Mute-System.Inventory.PreviousPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBanManager.openPagedMuteInv(p, target, page-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.getSlot() == 52) {\r\n\t\t\t\t\t\tif (e.getCurrentItem().getItemMeta().getDisplayName().equals(Main.getMSG(\"Messages.Mute-System.Inventory.NextPage.NotAvailable\"))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBanManager.openPagedMuteInv(p, target, page+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().startsWith(\"§7Settings §8- §eChatFilter\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§3Add Cursed-Words §8| §7Deactivated\")) {\r\n\t\t\t\t\t\tInventoryHandler.filter.add(p);\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7You are now able to write your curse words which will be blocked afterwards!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§3Add Cursed-Words §8| §aActivated\")) {\r\n\t\t\t\t\t\tInventoryHandler.filter.remove(p);\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7You can now use the chat as before!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/de/lacodev/rsystem/listeners/Listener_Inventories.java b/src/de/lacodev/rsystem/listeners/Listener_Inventories.java
--- a/src/de/lacodev/rsystem/listeners/Listener_Inventories.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/listeners/Listener_Inventories.java	(date 1610274644047)
@@ -2,6 +2,7 @@
 
 import java.sql.SQLException;
 
+import net.milkbowl.vault.chat.Chat;
 import org.bukkit.Bukkit;
 import org.bukkit.ChatColor;
 import org.bukkit.enchantments.Enchantment;
@@ -258,15 +259,15 @@
 			}
 		}
 		
-		if(e.getView().getTitle().startsWith("§cStaffCore §8- §7Protections")) {
+		if(e.getView().getTitle().startsWith(ChatColor.RED + "StaffCore " + ChatColor.DARK_GRAY + "- " + ChatColor.GRAY + "Protections")) {
 			e.setCancelled(true);
 			PanelManager manager = new PanelManager();
 
 			if(e.getCurrentItem() != null) {
 				if (e.getSlot() > 8 && e.getSlot() < 45) {
 					if(e.getCurrentItem().hasItemMeta()) {
-						if(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(" §8| §cUnprotected")) {
-							String s = e.getCurrentItem().getItemMeta().getDisplayName().replace(" §8| §cUnprotected", "");
+						if(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(ChatColor.DARK_GRAY + " | " + ChatColor.RED + "Unprotected")) {
+							String s = e.getCurrentItem().getItemMeta().getDisplayName().replace(ChatColor.DARK_GRAY + " | " + ChatColor.RED + "Unprotected", "");
 							String playername = ChatColor.stripColor(s);
 							
 							SystemManager.changeProtectionState(playername);
@@ -275,18 +276,18 @@
 							SkullMeta meta = (SkullMeta) player.getItemMeta();
 							meta.setOwner(playername);
 							if(SystemManager.isProtected(SystemManager.getUUIDByName(playername))) {
-								meta.setDisplayName("§7" + playername + " §8| §aProtected");
+								meta.setDisplayName(ChatColor.GRAY + playername + ChatColor.DARK_GRAY + " | " + ChatColor.GREEN + "Protected");
 								meta.addItemFlags(ItemFlag.HIDE_ENCHANTS);
 								meta.addEnchant(Enchantment.DURABILITY, 1, true);
 							} else {
-								meta.setDisplayName("§7" + playername + " §8| §cUnprotected");
+								meta.setDisplayName(ChatColor.GRAY + playername + ChatColor.DARK_GRAY + " | " + ChatColor.RED + "Unprotected");
 							}
 							player.setItemMeta(meta);
 								
 							e.getClickedInventory().setItem(e.getSlot(), player);
 							
-						} else if(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(" §8| §aProtected")) {
-							String s = e.getCurrentItem().getItemMeta().getDisplayName().replace(" §8| §aProtected", "");
+						} else if(e.getCurrentItem().getItemMeta().getDisplayName().endsWith(ChatColor.DARK_GRAY + " | " + ChatColor.GREEN + "Protected")) {
+							String s = e.getCurrentItem().getItemMeta().getDisplayName().replace(ChatColor.DARK_GRAY + " | " + ChatColor.GREEN + "Protected", "");
 							String playername = ChatColor.stripColor(s);
 							
 							SystemManager.changeProtectionState(playername);
@@ -295,11 +296,11 @@
 							SkullMeta meta = (SkullMeta) player.getItemMeta();
 							meta.setOwner(playername);
 							if(SystemManager.isProtected(SystemManager.getUUIDByName(playername))) {
-								meta.setDisplayName("§7" + playername + " §8| §aProtected");
+								meta.setDisplayName(ChatColor.GRAY + playername + ChatColor.DARK_GRAY + " | " + ChatColor.GREEN + "Protected");
 								meta.addItemFlags(ItemFlag.HIDE_ENCHANTS);
 								meta.addEnchant(Enchantment.DURABILITY, 1, true);
 							} else {
-								meta.setDisplayName("§7" + playername + " §8| §cUnprotected");
+								meta.setDisplayName(ChatColor.GRAY + playername + ChatColor.DARK_GRAY + " | " + ChatColor.RED + "Unprotected");
 							}
 							player.setItemMeta(meta);
 								
@@ -307,7 +308,7 @@
 						}
 					}
 				} else {
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§c◄ Go back")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "◄ Go back")) {
 						manager.openPlayerManagement(p);
 					}
 					int page = PageManager.page.get(((Player) e.getWhoClicked()).getPlayer());
Index: src/de/lacodev/rsystem/utils/Data.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.utils;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.UUID;\r\n\r\nimport org.bukkit.Material;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\nimport org.bukkit.inventory.meta.SkullMeta;\r\n\r\nimport com.mojang.authlib.GameProfile;\r\nimport com.mojang.authlib.properties.Property;\r\n\r\nimport de.lacodev.rsystem.enums.Heads;\r\nimport de.lacodev.rsystem.enums.XMaterial;\r\n\r\npublic class Data {\r\n\t\r\n\tpublic static ItemStack getHead(String name) {\r\n\t\tfor(Heads head : Heads.values()) {\r\n\t\t\tif(head.getName().equals(name)) {\r\n\t\t\t\treturn head.getItemStack();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildHead(String head, String name) {\r\n\t\t\r\n\t\tItemStack stack = getHead(head.toLowerCase());\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildHead(String head, String name, String lore1, String lore2) {\r\n\t\t\r\n\t\tItemStack stack = getHead(head);\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tmeta.setDisplayName(name);\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(lore2);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static ItemStack createSkull(String url, String name) {\r\n\t\tItemStack head = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\tif(url.isEmpty()) return head;\r\n\t\t\r\n\t\tSkullMeta headMeta = (SkullMeta) head.getItemMeta();\r\n\t\tGameProfile profile = new GameProfile(UUID.randomUUID(), null);\r\n\t\t\r\n\t\tprofile.getProperties().put(\"textures\", new Property(\"textures\", url));\r\n\t\t\r\n\t\ttry {\r\n\t\t\tField profileField = headMeta.getClass().getDeclaredField(\"profile\");\r\n\t\t\tprofileField.setAccessible(true);\r\n\t\t\tprofileField.set(headMeta, profile);\r\n\t\t} catch(IllegalArgumentException | NoSuchFieldException | SecurityException | IllegalAccessException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\thead.setItemMeta(headMeta);\r\n\t\t\r\n\t\treturn head;\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static ItemStack buildItemStack(Material mat, int size, int sh, String name, String lore1, String lore2) {\r\n\t\tItemStack stack = new ItemStack(mat, size, (short)sh);\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(lore2);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildItemStack(XMaterial mat, String name, String lore1, String lore2) {\r\n\t\tItemStack stack = mat.parseItem();\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(lore2);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static ItemStack buildPlayerHead(String name, String skullowner) {\r\n\t\tItemStack stack = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\tSkullMeta meta = (SkullMeta) stack.getItemMeta();\r\n\t\tmeta.setOwner(skullowner);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static ItemStack buildPlayerHead(String name, String skullowner, String lore1) {\r\n\t\tItemStack stack = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\tSkullMeta meta = (SkullMeta) stack.getItemMeta();\r\n\t\tmeta.setOwner(skullowner);\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static ItemStack buildItemStackLore(Material mat, int size, int sh, String name, String lore1, String lore2, String lore3) {\r\n\t\tItemStack stack = new ItemStack(mat, size, (short)sh);\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(lore2);\r\n\t\tlore.add(lore3);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildItemStackLore(XMaterial mat, String name, String lore1, String lore2, String lore3) {\r\n\t\tItemStack stack = mat.parseItem();\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tArrayList<String> lore = new ArrayList<>();\r\n\t\tlore.add(\"\");\r\n\t\tlore.add(lore1);\r\n\t\tlore.add(lore2);\r\n\t\tlore.add(lore3);\r\n\t\tlore.add(\"\");\r\n\t\tmeta.setLore(lore);\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildPlace() {\r\n\t\tItemStack stack = XMaterial.BLACK_STAINED_GLASS_PANE.parseItem();\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tmeta.setDisplayName(\"§8...\");\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static ItemStack buildItem(Material mat, int size, int sh, String name) {\r\n\t\tItemStack stack = new ItemStack(mat, size, (short)sh);\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\t\r\n\tpublic static ItemStack buildItem(XMaterial mat, String name) {\r\n\t\tItemStack stack = mat.parseItem();\r\n\t\tItemMeta meta = stack.getItemMeta();\r\n\t\tmeta.setDisplayName(name);\r\n\t\tstack.setItemMeta(meta);\r\n\t\t\r\n\t\treturn stack;\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/utils/Data.java b/src/de/lacodev/rsystem/utils/Data.java
--- a/src/de/lacodev/rsystem/utils/Data.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/utils/Data.java	(date 1610274492544)
@@ -4,6 +4,7 @@
 import java.util.ArrayList;
 import java.util.UUID;
 
+import org.bukkit.ChatColor;
 import org.bukkit.Material;
 import org.bukkit.inventory.ItemStack;
 import org.bukkit.inventory.meta.ItemMeta;
@@ -169,7 +170,7 @@
 	public static ItemStack buildPlace() {
 		ItemStack stack = XMaterial.BLACK_STAINED_GLASS_PANE.parseItem();
 		ItemMeta meta = stack.getItemMeta();
-		meta.setDisplayName("§8...");
+		meta.setDisplayName(ChatColor.DARK_GRAY + "...");
 		stack.setItemMeta(meta);
 		
 		return stack;
Index: src/de/lacodev/rsystem/commands/CMD_ChatClear.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.commands;\r\n\r\nimport de.lacodev.rsystem.Main;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.scheduler.BukkitRunnable;\r\n\r\npublic class CMD_ChatClear implements CommandExecutor {\r\n    @Override\r\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] strings) {\r\n        System.out.println(\"ChatClear Triggered!\");\r\n        if (sender instanceof Player){\r\n            Player p = (Player) sender;\r\n            if( p.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\")) || p.hasPermission(Main.getPermissionNotice(\"Permissions.Chat.Clear\")) ) {\r\n                int a = 200;\r\n\r\n                        for (int i = 0; i < a; i++) {\r\n                            for (Player all : Bukkit.getOnlinePlayers()){\r\n                                all.sendMessage(\"\\n\");\r\n                            }\r\n                        }\r\n\r\n                        for (Player s : Bukkit.getOnlinePlayers()){\r\n                            s.sendMessage(Main.prefix + Main.getMSG(\"Messages.System.ChatClear.Player\").replace(\"%player%\", p.getName()));\r\n                        }\r\n\r\n            }\r\n        }else{\r\n            int a = 200;\r\n            new BukkitRunnable(){\r\n                @Override\r\n                public void run() {\r\n                    for (int i = 0; i < a; i++) {\r\n                        for (Player all : Bukkit.getOnlinePlayers()){\r\n                            all.sendMessage(\"\\n\");\r\n                        }\r\n                    }\r\n\r\n                    for (Player s : Bukkit.getOnlinePlayers()){\r\n                        //s.sendMessage(Main.prefix + Main.getMSG(\"Messages.System.ChatClear.Console\"));\r\n                        Bukkit.broadcastMessage(\"Chat cleared by: Console!\");\r\n                    }\r\n                }\r\n            }.runTaskAsynchronously(Main.getInstance());\r\n        }\r\n        return false;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/commands/CMD_ChatClear.java b/src/de/lacodev/rsystem/commands/CMD_ChatClear.java
--- a/src/de/lacodev/rsystem/commands/CMD_ChatClear.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/commands/CMD_ChatClear.java	(date 1610222016330)
@@ -11,12 +11,15 @@
 public class CMD_ChatClear implements CommandExecutor {
     @Override
     public boolean onCommand(CommandSender sender, Command command, String label, String[] strings) {
-        System.out.println("ChatClear Triggered!");
         if (sender instanceof Player){
             Player p = (Player) sender;
             if( p.hasPermission(Main.getPermissionNotice("Permissions.Everything")) || p.hasPermission(Main.getPermissionNotice("Permissions.Chat.Clear")) ) {
                 int a = 200;
 
+                new BukkitRunnable(){
+
+                    @Override
+                    public void run() {
                         for (int i = 0; i < a; i++) {
                             for (Player all : Bukkit.getOnlinePlayers()){
                                 all.sendMessage("\n");
@@ -26,7 +29,12 @@
                         for (Player s : Bukkit.getOnlinePlayers()){
                             s.sendMessage(Main.prefix + Main.getMSG("Messages.System.ChatClear.Player").replace("%player%", p.getName()));
                         }
+                    }
+                }.runTaskAsynchronously(Main.getInstance());
 
+
+            }else{
+                p.sendMessage(Main.getPrefix() + Main.getMSG("Messages.System.No-Permission").replace("%permission%", Main.getPermissionNotice("Permissions.Chat.Clear")));
             }
         }else{
             int a = 200;
Index: src/plugin.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>name: StaffCore\r\nversion: 3.5.8\r\nauthor: Laco Development\r\nmain: de.lacodev.rsystem.Main\r\napi-version: 1.13\r\n\r\nwebsite: https://www.spigotmc.org/resources/staffcore-1-7-1-15.48655/\r\n\r\ncommands:\r\n   staffcore:\r\n      description: Main Command of StaffCore v3.3.0\r\n   report:\r\n      description: Report a player either with an gui or directly in the command\r\n   reports:\r\n      description: List all open Reports\r\n   reportmanager:\r\n      description: Manage your Reportreasons with this manager\r\n      aliases: [rmanager]\r\n   check:\r\n      description: Checks for a players previous punishments\r\n   ban:\r\n      description: Ban players from the Server\r\n   mute:\r\n      description: Mute players from the chat\r\n   banmanager:\r\n      description: Manage your Ban/Mute Reasons\r\n   unban:\r\n      description: Undo a wrong ban\r\n   unmute:\r\n      description: Undo a wrong mute\r\n   chatfilter:\r\n      aliases: [cf]\r\n      description: Open Chatfiltermenu\r\n   banlist:\r\n      description: Lists all active bans\r\n   banip:\r\n      description: Ban a players IP-Address\r\n   unbanip:\r\n      description: Unban a players IP-Address\r\n   banhistory:\r\n      description: Displays the BanHistory for a specific Player\r\n   checkalts:\r\n      description: Displays all possible Altaccounts of a specific Player\r\n   warn:\r\n      description: Warn a player for inappropriate behaviour\r\n   warns:\r\n      description: Get all warnings of a specific player\r\n   staffui:\r\n      description: Verify Webaccounts\r\n   ticket:\r\n      description: Create and list your tickets\r\n   chatclear:\r\n      description: Clears your Chat
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/plugin.yml b/src/plugin.yml
--- a/src/plugin.yml	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/plugin.yml	(date 1610228033645)
@@ -50,4 +50,9 @@
    ticket:
       description: Create and list your tickets
    chatclear:
-      description: Clears your Chat
\ No newline at end of file
+      description: Clears your Chat
+   broadcast:
+      aliases: [ bc ]
+      description: BroadCast a Message
+   globalmute:
+      description: Mute or Unmute the GlobalChat
\ No newline at end of file
Index: src/de/lacodev/rsystem/Main.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\nimport java.nio.charset.Charset;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\n\r\nimport de.lacodev.rsystem.commands.*;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.Sound;\r\nimport org.bukkit.configuration.file.YamlConfiguration;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.plugin.Plugin;\r\nimport org.bukkit.plugin.PluginManager;\r\nimport org.bukkit.plugin.RegisteredServiceProvider;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\nimport org.bukkit.scheduler.BukkitRunnable;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\nimport org.json.simple.parser.ParseException;\r\n\r\nimport de.lacodev.rsystem.completer.Completer_Ban;\r\nimport de.lacodev.rsystem.completer.Completer_BanManager;\r\nimport de.lacodev.rsystem.completer.Completer_Mute;\r\nimport de.lacodev.rsystem.completer.Completer_Report;\r\nimport de.lacodev.rsystem.completer.Completer_ReportManager;\r\nimport de.lacodev.rsystem.completer.Completer_StaffCore;\r\nimport de.lacodev.rsystem.listeners.Listener_Chat;\r\nimport de.lacodev.rsystem.listeners.Listener_ChatLog;\r\nimport de.lacodev.rsystem.listeners.Listener_GuardianDMG;\r\nimport de.lacodev.rsystem.listeners.Listener_Inventories;\r\nimport de.lacodev.rsystem.listeners.Listener_JoinQuit;\r\nimport de.lacodev.rsystem.listeners.Listener_Login;\r\nimport de.lacodev.rsystem.listeners.Listener_Matrix;\r\nimport de.lacodev.rsystem.listeners.Listener_NoConnection;\r\nimport de.lacodev.rsystem.listeners.Listener_PanelManager;\r\nimport de.lacodev.rsystem.listeners.Listener_Spartan;\r\nimport de.lacodev.rsystem.mysql.MySQL;\r\nimport de.lacodev.rsystem.utils.AntiMCLeaksHandler;\r\nimport de.lacodev.rsystem.utils.BanManager;\r\nimport de.lacodev.rsystem.utils.ReportManager;\r\nimport de.lacodev.rsystem.utils.SystemManager;\r\nimport de.lacodev.rsystem.utils.TranslationHandler;\r\nimport me.vagdedes.spartan.api.API;\r\nimport me.vagdedes.spartan.system.Enums.HackType;\r\nimport net.milkbowl.vault.economy.Economy;\r\n\r\npublic class Main extends JavaPlugin{\r\n\r\n\tpublic static Main instance;\r\n\tprivate static Economy econ = null;\r\n\t\r\n\tpublic static String prefix;\r\n\t\r\n\tpublic double lizenz;\r\n\tpublic double version;\r\n\t\r\n\tpublic boolean latest = false;\r\n\tpublic boolean experimental = false;\r\n\tpublic boolean actionbar = false;\r\n\tpublic boolean bansystem = true;\r\n\t\r\n\tpublic static AntiMCLeaksHandler antimcleakshandler;\r\n\tpublic static TranslationHandler translator;\r\n\t\r\n\tpublic String host;\r\n\tpublic String port;\r\n\tpublic String database;\r\n\tpublic String username;\r\n\tpublic String password;\r\n\t\r\n\tpublic PluginManager pm = Bukkit.getPluginManager();\r\n\tpublic API api = null;\r\n\t\r\n\tpublic ArrayList<String> matrix_hacktypes = new ArrayList<>();\r\n\t\r\n\tpublic void onEnable() {\r\n\t\tinstance = this;\r\n\t\tantimcleakshandler = new AntiMCLeaksHandler();\r\n\t\ttranslator = new TranslationHandler();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Checking version... §8(§7\"+ this.getDescription().getVersion() +\"§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tcheckLizenz(new URL(\"https://api.lacodev.de/staffcore/versions/\"));\r\n\t\t} catch (MalformedURLException e) {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lFAILED §8(§7Versioncheck§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t}\r\n\t\t\r\n\t\tloadConfigs();\r\n\t\tapplyConfigs();\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-Vault\")) {\r\n\t\t\tif(setupEconomy()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added Vault to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add Vault to our system! Please make sure you have Vault installed!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-ActionBarAPI\")) {\r\n\t\t\tif(setupActionBar()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added ActionBarAPI to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add ActionBarAPI to our system! Please make sure you have ActionBarAPI installed!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-MatrixAntiCheat\")) {\r\n\t\t\tif(setupMatrix()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added Matrix to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add Matrix to our system! Please make sure you have Matrix installed and set up properly!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-SpartanAntiCheat\")) {\r\n\t\t\tif(setupSpartanAC()) {\r\n\t\t\t\tapi = new API();\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added SpartanAntiCheat to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add SpartanAntiCheat to our system! Please make sure you have SpartanAntiCheat installed and set up properly!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tMySQL.connect();\r\n\t\tMySQL.createTable();\r\n\t\t\r\n\t\tfor(Material mat : Material.values()) {\r\n\t\t\tMySQL.updateMaterial(mat);\r\n\t\t}\r\n\t\t\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tif(initBanSystemDetectionService()) {\r\n\t\t\t\tregisterCommands();\r\n\t\t\t\tregisterEvents();\r\n\t\t\t\tstartSync();\r\n\t\t\t\tstartAntiMcLeaksServices();\r\n\t\t\t\t\r\n\t\t\t\tfor(Sound s : Sound.values()) {\r\n\t\t\t\t\tBanManager.sound_enums.add(s.name().toUpperCase());\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Environment: §7\" + Bukkit.getVersion());\r\n\t\t\t\tif(experimental) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(latest) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t}\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §a§lSUCCESS §8(§aPLUGIN STARTED§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §7Environment: \" + Bukkit.getVersion());\r\n\t\t\t\tif(experimental) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(latest) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t}\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lERROR §8(§cBanSystemDetectionService CRASHED§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpm.registerEvents(new Listener_NoConnection(), this);\r\n\t\t\t\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif(!MySQL.isConnected()) {\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cStaffCore §8» §c§lERROR §8(§cNO CONNECTION§8)\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cStaffCore §8» §7Please make sure to set up your database correctly!\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.runTaskTimerAsynchronously(this, 0, 30*20);\r\n\t\t\t\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Environment: §7\" + Bukkit.getVersion());\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lERROR §8(§cNO CONNECTION§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void startAntiMcLeaksServices() {\r\n\t\tif(getConfig().getBoolean(\"MCLeaks-Blocker.Enable\")) {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §8Activating MCLeaks-Blocker...\");\r\n\t\t\t\r\n\t\t\tif(getConfig().getBoolean(\"MCLeaks-Blocker.Cache-Updater.Enable\")) {\r\n\t\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\tgetAntiMCLeaksHandler().cacheAccounts();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}.runTaskTimerAsynchronously(instance, 0, getConfig().getInt(\"MCLeaks-Blocker.Cache-Updater.Period-In-Minutes\") * 20 * 60);\r\n\t\t\t} else {\r\n\t\t\t\tgetAntiMCLeaksHandler().cacheAccounts();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void onReload() {\r\n\t\t\r\n\t\tloadConfigs();\r\n\t\tapplyConfigs();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Checking version... §8(§7\"+ this.getDescription().getVersion() +\"§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tcheckLizenz(new URL(\"https://api.lacodev.de/staffcore/versions/\"));\r\n\t\t} catch (MalformedURLException e) {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lFAILED §8(§7Versioncheck§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-Vault\")) {\r\n\t\t\tif(setupEconomy()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added Vault to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add Vault to our system! Please make sure you have Vault installed!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-ActionBarAPI\")) {\r\n\t\t\tif(setupActionBar()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added ActionBarAPI to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add ActionBarAPI to our system! Please make sure you have ActionBarAPI installed!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-MatrixAntiCheat\")) {\r\n\t\t\tif(setupMatrix()) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added Matrix to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add Matrix to our system! Please make sure you have Matrix installed and set up properly!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Include-SpartanAntiCheat\")) {\r\n\t\t\tif(setupSpartanAC()) {\r\n\t\t\t\tapi = new API();\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§aSuccessfully §7added SpartanAntiCheat to our system\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(prefix + \"§cFailed §7to add SpartanAntiCheat to our system! Please make sure you have SpartanAntiCheat installed and set up properly!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tMySQL.connect();\r\n\t\tMySQL.createTable();\r\n\t\t\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tif(initBanSystemDetectionService()) {\r\n\t\t\t\tstartAntiMcLeaksServices();\r\n\t\t\t\t\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Environment: §7\" + Bukkit.getVersion());\r\n\t\t\t\tif(experimental) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(latest) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t}\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §a§lSUCCESS §8(§aPLUGIN STARTED§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §7Environment: \" + Bukkit.getVersion());\r\n\t\t\t\tif(experimental == true) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(latest == true) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore: §7v\" + this.getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t}\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lERROR §8(§cBanSystemDetectionService CRASHED§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpm.registerEvents(new Listener_NoConnection(), this);\r\n\t\t\t\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif(!MySQL.isConnected()) {\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cStaffCore §8» §c§lERROR §8(§cNO CONNECTION§8)\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cStaffCore §8» §7Please make sure to set up your database correctly!\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.runTaskTimerAsynchronously(this, 0, 30*20);\r\n\t\t\t\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Environment: §7\" + Bukkit.getVersion());\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lERROR §8(§cNO CONNECTION§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void startSync() {\r\n\t\tif(getConfig().getBoolean(\"General.Sync-with-WebInterface\")) {\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\r\n\t\t\t\t\tResultSet rs = MySQL.getResultSync(\"SELECT * FROM staffcoreui_sync\");\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twhile(rs.next()) {\r\n\t\t\t\t\t\t\tif(rs.getString(\"SYNC_TYPE\").matches(\"BAN_PLAYER\")) {\r\n\t\t\t\t\t\t\t\tBanManager.submitBan(rs.getString(\"TARGET_UUID\"), rs.getString(\"DESCRIPTION\"), rs.getString(\"EXECUTOR_UUID\"));\r\n\t\t\t\t\t\t\t\tMySQL.update(\"DELETE FROM staffcoreui_sync WHERE id = '\"+ rs.getInt(\"id\") +\"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(rs.getString(\"SYNC_TYPE\").matches(\"MUTE_PLAYER\")) {\r\n\t\t\t\t\t\t\t\tBanManager.submitMute(rs.getString(\"TARGET_UUID\"), rs.getString(\"DESCRIPTION\"), rs.getString(\"EXECUTOR_UUID\"));\r\n\t\t\t\t\t\t\t\tMySQL.update(\"DELETE FROM staffcoreui_sync WHERE id = '\"+ rs.getInt(\"id\") +\"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(rs.getString(\"SYNC_TYPE\").matches(\"CLAIM_REPORT\")) {\r\n\t\t\t\t\t\t\t\tPlayer team = Bukkit.getPlayer(rs.getString(\"EXECUTOR_UUID\"));\r\n\t\t\t\t\t\t\t\tif(team != null) {\r\n\t\t\t\t\t\t\t\t\tReportManager.claimReport(team, rs.getString(\"TARGET_UUID\"));\r\n\t\t\t\t\t\t\t\t\tMySQL.update(\"DELETE FROM staffcoreui_sync WHERE id = '\"+ rs.getInt(\"id\") +\"'\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(rs.getString(\"SYNC_TYPE\").matches(\"VERIFY_WEBACCOUNT\")) {\r\n\t\t\t\t\t\t\t\tPlayer team = Bukkit.getPlayer(rs.getString(\"EXECUTOR_UUID\"));\r\n\t\t\t\t\t\t\t\tif(team != null) {\r\n\t\t\t\t\t\t\t\t\tSystemManager.sendVerificationToPlayer(team);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §cProblem with staffcoreui_sync detected!\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlong current = System.currentTimeMillis();\r\n\t\t\t\t\tResultSet unbancheck = MySQL.getResult(\"SELECT * FROM ReportSystem_bansdb\");\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twhile(unbancheck.next()) {\r\n\t\t\t\t\t\t\tif(unbancheck.getLong(\"BAN_END\") != -1) {\r\n\t\t\t\t\t\t\t\tif(unbancheck.getLong(\"BAN_END\") < current) {\r\n\t\t\t\t\t\t\t\t\tBanManager.unban(unbancheck.getString(\"BANNED_UUID\"));\r\n\t\t\t\t\t\t\t\t\tBanManager.sendConsoleNotify(\"UNBAN\", unbancheck.getString(\"MUTED_UUID\"));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tResultSet unmutecheck = MySQL.getResult(\"SELECT * FROM ReportSystem_mutesdb\");\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twhile(unmutecheck.next()) {\r\n\t\t\t\t\t\t\tif(unmutecheck.getLong(\"MUTE_END\") != -1) {\r\n\t\t\t\t\t\t\t\tif(unmutecheck.getLong(\"MUTE_END\") < current) {\r\n\t\t\t\t\t\t\t\t\tBanManager.unmute(unmutecheck.getString(\"MUTED_UUID\"));\r\n\t\t\t\t\t\t\t\t\tBanManager.sendConsoleNotify(\"UNMUTE\", unmutecheck.getString(\"MUTED_UUID\"));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}.runTaskTimerAsynchronously(getInstance(), 5*20, 5*20);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic boolean initBanSystemDetectionService() {\r\n\t\t\r\n\t\tif(getInstance().getConfig().getBoolean(\"Ban-System.Enable\") == false) {\r\n\t\t\tbansystem = false;\r\n\t\t\t\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore BanSystem §8(§cDEACTIVATED§8)\");\r\n\t\t}\r\n\t\t\r\n\t\tArrayList<String> detectservice = new ArrayList<>();\r\n\t\t\r\n\t\tdetectservice.add(\"LiteBans\");\r\n\t\tdetectservice.add(\"ProfessionalBans Reloaded\");\r\n\t\tdetectservice.add(\"AdvancedBan\");\r\n\t\tdetectservice.add(\"BansPlus\");\r\n\t\tdetectservice.add(\"maxbans-plus\");\r\n\t\tdetectservice.add(\"BanSystem-Bukkit\");\r\n\t\t\r\n\t\tfor(Plugin p : Bukkit.getPluginManager().getPlugins()) {\r\n\t\t\tif(detectservice.contains(p.getName())) {\r\n\t\t\t\tif(getInstance().getConfig().getBoolean(\"General.Activate-BanSystem-Detection\")) {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Detected BanSystem §8(§d\"+ p.getName() +\"§8)\");\r\n\t\t\t\t\tdeactivateBanningSystem();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\r\n\tprivate void deactivateBanningSystem() {\r\n\t\tbansystem = false;\r\n\t\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» StaffCore BanSystem §8(§cDEACTIVATED§8)\");\r\n\t}\r\n\r\n\tpublic boolean setupMatrix() {\r\n        if (getServer().getPluginManager().getPlugin(\"Matrix\") == null) {\r\n            return false;\r\n        } else {\r\n        \t\r\n        \tfor(me.rerere.matrix.api.HackType matrix : me.rerere.matrix.api.HackType.values()) {\r\n        \t\tmatrix_hacktypes.add(matrix.name().toUpperCase());\r\n        \t}\r\n        \t\r\n        \treturn true;\r\n        }\r\n\t}\r\n\r\n\tpublic boolean setupActionBar() {\r\n        if (getServer().getPluginManager().getPlugin(\"ActionBarAPI\") == null) {\r\n            return false;\r\n        } else {\r\n        \tactionbar = true;\r\n        \treturn true;\r\n        }\r\n\t}\r\n\t\r\n\tpublic boolean setupSpartanAC() {\r\n        if (getServer().getPluginManager().getPlugin(\"SpartanAPI\") == null && getServer().getPluginManager().getPlugin(\"Spartan\") == null) {\r\n            return false;\r\n        } else {\r\n        \treturn true;\r\n        }\r\n\t}\r\n\r\n\tprivate void registerEvents() {\r\n\t\tpm.registerEvents(new Listener_JoinQuit(), this);\r\n\t\tpm.registerEvents(new Listener_Inventories(), this);\r\n\t\tpm.registerEvents(new Listener_Login(), this);\r\n\t\tpm.registerEvents(new Listener_Chat(), this);\r\n\t\tpm.registerEvents(new Listener_ChatLog(), this);\r\n\t\tpm.registerEvents(new Listener_GuardianDMG(), this);\r\n\t\tpm.registerEvents(new Listener_PanelManager(), this);\r\n\t\tif(setupMatrix()) {\r\n\t\t\tpm.registerEvents(new Listener_Matrix(), this);\r\n\t\t}\r\n\t\tif(setupSpartanAC()) {\r\n\t\t\tpm.registerEvents(new Listener_Spartan(), this);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate void registerCommands() {\r\n\t\t// StaffCore Command\r\n\t\tgetCommand(\"staffcore\").setExecutor(new CMD_StaffCore());\r\n\t\tgetCommand(\"staffcore\").setTabCompleter(new Completer_StaffCore());\r\n\t\t\r\n\t\t// Report Command\r\n\t\tgetCommand(\"report\").setExecutor(new CMD_Report());\r\n\t\tgetCommand(\"report\").setTabCompleter(new Completer_Report());\r\n\t\t\r\n\t\t// Reports Command\r\n\t\tgetCommand(\"reports\").setExecutor(new CMD_Reports());\r\n\t\t\r\n\t\t// Check Command\r\n\t\tgetCommand(\"check\").setExecutor(new CMD_Check());\r\n\t\t\r\n\t\t// ReportManager Command\r\n\t\tgetCommand(\"reportmanager\").setExecutor(new CMD_ReportManager());\r\n\t\tgetCommand(\"reportmanager\").setTabCompleter(new Completer_ReportManager());\r\n\t\t\r\n\t\tif(bansystem == true) {\r\n\t\t\t// BanManager Command\r\n\t\t\tgetCommand(\"banmanager\").setExecutor(new CMD_BanManager());\r\n\t\t\tgetCommand(\"banmanager\").setTabCompleter(new Completer_BanManager());\r\n\t\t\t\r\n\t\t\t// Ban Command\r\n\t\t\tgetCommand(\"ban\").setExecutor(new CMD_Ban());\r\n\t\t\tgetCommand(\"ban\").setTabCompleter(new Completer_Ban());\r\n\t\t\t\r\n\t\t\t// Mute Command\r\n\t\t\tgetCommand(\"mute\").setExecutor(new CMD_Mute());\r\n\t\t\tgetCommand(\"mute\").setTabCompleter(new Completer_Mute());\r\n\t\t\t\r\n\t\t\t// Unban Command\r\n\t\t\tgetCommand(\"unban\").setExecutor(new CMD_Unban());\r\n\t\t\t\r\n\t\t\t// Unmute Command\r\n\t\t\tgetCommand(\"unmute\").setExecutor(new CMD_Unmute());\r\n\t\t\t\r\n\t\t\t// BanList Command\r\n\t\t\tgetCommand(\"banlist\").setExecutor(new CMD_BanList());\r\n\t\t\t\r\n\t\t\t// BanIP Command\r\n\t\t\tgetCommand(\"banip\").setExecutor(new CMD_BanIP());\r\n\t\t\t\r\n\t\t\t// UnBanIP Command\r\n\t\t\tgetCommand(\"unbanip\").setExecutor(new CMD_UnBanIP());\r\n\t\t\t\r\n\t\t\t// BanHistory Command\r\n\t\t\tgetCommand(\"banhistory\").setExecutor(new CMD_BanHistory());\r\n\t\t}\r\n\t\t\r\n\t\t// Chatfilter Command\r\n\t\tgetCommand(\"chatfilter\").setExecutor(new CMD_ChatFilter());\r\n\t\t\r\n\t\t// ChatLog Command (DROPPED)\r\n\t\t// getCommand(\"chatlog\").setExecutor(new CMD_ChatLog());\r\n\t\t\r\n\t\t// CheckAlts Command\r\n\t\tgetCommand(\"checkalts\").setExecutor(new CMD_CheckAlts());\r\n\t\t\r\n\t\t// Warn Command\r\n\t\tgetCommand(\"warn\").setExecutor(new CMD_Warn());\r\n\t\t\r\n\t\t// Warns Command\r\n\t\tgetCommand(\"warns\").setExecutor(new CMD_Warns());\r\n\t\t\r\n\t\t// StaffUI Command\r\n\t\tgetCommand(\"staffui\").setExecutor(new CMD_StaffUI());\r\n\t\t\r\n\t\t// Ticket Command\r\n\t\tgetCommand(\"ticket\").setExecutor(new CMD_Ticket());\r\n\r\n\t\t//ChatClear Command\r\n\t\tgetCommand(\"chatclear\").setExecutor(new CMD_ChatClear());\r\n\t}\r\n\r\n\tpublic void onDisable() {\r\n\t\tMySQL.disconnect();\r\n\t}\r\n\r\n\tprivate void loadConfigs() {\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Generating... §8(§econfig.yml§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t\tgetConfig().options().copyDefaults(true);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"General.System-Prefix\", \"&cSystem &8%double_arrow% \");\r\n\t\tgetConfig().addDefault(\"General.Custom-Messages.Enable\", false);\r\n\t\tgetConfig().addDefault(\"General.Custom-Messages.Rest-API-Key\", \"{Your API-Key from the Dashboard}\");\r\n\t\tgetConfig().addDefault(\"General.Language\", \"de\");\r\n\t\tgetConfig().addDefault(\"General.MySQL.Debug\", true);\r\n\t\tgetConfig().addDefault(\"General.Activate-BanSystem-Detection\", false);\r\n\t\tgetConfig().addDefault(\"General.Include-Worldname\", false);\r\n\t\tgetConfig().addDefault(\"General.Include-Vault\", false);\r\n\t\tgetConfig().addDefault(\"General.Include-ActionBarAPI\", false);\r\n\t\tgetConfig().addDefault(\"General.Include-MatrixAntiCheat\", false);\r\n\t\tgetConfig().addDefault(\"General.Include-SpartanAntiCheat\", false);\r\n\t\tgetConfig().addDefault(\"General.Force-SpectatorMode\", true);\r\n\t\tgetConfig().addDefault(\"General.Sync-with-WebInterface\", false);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"MCLeaks-Blocker.Enable\", true);\r\n\t\tgetConfig().addDefault(\"MCLeaks-Blocker.Cache-Updater.Enable\", true);\r\n\t\tgetConfig().addDefault(\"MCLeaks-Blocker.Cache-Updater.Period-In-Minutes\", 10);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Ban-System.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Ban-System.Per-Reason-Permission.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Ban-System.Per-Reason-Permission.Prefix-For-Permission\", \"rsystem.ban.reason.\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Mute-System.Per-Reason-Permission.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Mute-System.Per-Reason-Permission.Prefix-For-Permission\", \"rsystem.mute.reason.\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Ban-Animation.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Ban-Animation.Type\", \"GUARDIAN\");\r\n\t\tgetConfig().addDefault(\"Ban-Animation.Sound\", \"ENTITY_ENDER_DRAGON_DEATH\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Vault.Rewards.Report.MIN\", 50);\r\n\t\tgetConfig().addDefault(\"Vault.Rewards.Report.MAX\", 150);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Report-Spam.Duration-in-Seconds\", 20);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"TicketSystem.Cooldown-In-Seconds\", 120);\r\n\t\tgetConfig().addDefault(\"TicketSystem.WebInterface-URL\", \"https://yourserver.com/Web-UI-v3.5.0/dashboard/tickets/view/?id=\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"MatrixAntiCheat.Autoreport.Enable\", false);\r\n\t\tgetConfig().addDefault(\"MatrixAntiCheat.Autoreport.Name\", \"MatrixAC\");\r\n\t\tgetConfig().addDefault(\"MatrixAntiCheat.Autoreport.Log.Reset-Violations-On-Join\", true);\r\n\t\tif(setupMatrix()) {\r\n\t\t\tfor(me.rerere.matrix.api.HackType matrix : me.rerere.matrix.api.HackType.values()) {\r\n\t\t\t\tgetConfig().addDefault(\"MatrixAntiCheat.Autoreport.\" + matrix.toString() + \".Displayname\", \"\" + matrix.toString().substring(0, 1).toUpperCase() + matrix.toString().substring(1).toLowerCase());\r\n\t\t\t\tgetConfig().addDefault(\"MatrixAntiCheat.Autoreport.\" + matrix.toString() + \".Violationslevel\", 20);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tgetConfig().addDefault(\"SpartanAntiCheat.Autoreport.Enable\", false);\r\n\t\tgetConfig().addDefault(\"SpartanAntiCheat.Autoreport.Name\", \"SpartanAC\");\r\n\t\tgetConfig().addDefault(\"SpartanAntiCheat.Autoreport.Log.Reset-Violations-On-Join\", true);\r\n\t\tif(setupSpartanAC()) {\r\n\t\t\tfor(HackType h : HackType.values()) {\r\n\t\t\t\tgetConfig().addDefault(\"SpartanAntiCheat.Autoreport.\"+ h.toString() + \".Displayname\", \"\" + h.toString().substring(0, 1).toUpperCase() + h.toString().substring(1).toLowerCase());\r\n\t\t\t\tgetConfig().addDefault(\"SpartanAntiCheat.Autoreport.\"+ h.toString() + \".Violationslevel\", 20);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Unpermitted-OP.Kick-Player.Enable\", true);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"IP-Ban.Ban-IP-When-Player-Gets-Banned\", false);\r\n\t\tgetConfig().addDefault(\"IP-Ban.Duration-in-Hours\", 24);\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Permissions.Everything\", \"rsystem.*\");\r\n\t\tgetConfig().addDefault(\"Permissions.System.Notify\", \"rsystem.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.System.Adminpanel\", \"rsystem.adminpanel\");\r\n\t\tgetConfig().addDefault(\"Permissions.Allow-OP.Join\", \"rsystem.op.allow\");\r\n\t\tgetConfig().addDefault(\"Permissions.Allow-OP.Notify\", \"rsystem.op.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.IpBan.Use\", \"rsystem.ipban.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.IpBan.Notify\", \"rsystem.ipban.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.IpUnBan.Use\", \"rsystem.ipunban.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.IpUnBan.Notify\", \"rsystem.ipunban.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.Report.Notify\", \"rsystem.report.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.Report.Claim\", \"rsystem.report.claim\");\r\n\t\tgetConfig().addDefault(\"Permissions.Report.Spam.Bypass\", \"rsystem.report.spam.bypass\");\r\n\t\tgetConfig().addDefault(\"Permissions.ReportManager.addreason\", \"rsystem.reportmanager.addreason\");\r\n\t\tgetConfig().addDefault(\"Permissions.ReportManager.removereason\", \"rsystem.reportmanager.removereason\");\r\n\t\tgetConfig().addDefault(\"Permissions.Reports.See\", \"rsystem.reports.see\");\r\n\t\tgetConfig().addDefault(\"Permissions.Check.Use\", \"rsystem.check.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.BanManager.addreason\", \"rsystem.banmanager.addreason\");\r\n\t\tgetConfig().addDefault(\"Permissions.BanManager.removereason\", \"rsystem.banmanager.removereason\");\r\n\t\tgetConfig().addDefault(\"Permissions.Ban.Use\", \"rsystem.ban.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.Ban.Notify\", \"rsystem.ban.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.Ban.List\", \"rsystem.ban.list\");\r\n\t\tgetConfig().addDefault(\"Permissions.Mute.Use\", \"rsystem.mute.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.Mute.Notify\", \"rsystem.mute.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.UnBan.Use\", \"rsystem.unban.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.UnBan.Notify\", \"rsystem.unban.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.UnMute.Use\", \"rsystem.unmute.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.UnMute.Notify\", \"rsystem.unmute.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.Chatfilter.Manage\", \"rsystem.chatfilter.manage\");\r\n\t\tgetConfig().addDefault(\"Permissions.ChatLog.Notify\", \"rsystem.chatlog.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.BanHistory.See\", \"rsystem.banhistory.see\");\r\n\t\tgetConfig().addDefault(\"Permissions.CheckAlts.Use\", \"rsystem.checkalts.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.Warn.Use\", \"rsystem.warn.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.Warn.Notify\", \"rsystem.warn.notify\");\r\n\t\tgetConfig().addDefault(\"Permissions.Warns.See\", \"rsystem.warns.see\");\r\n\t\tgetConfig().addDefault(\"Permissions.ChatLogs.Use\", \"rsystem.chatlogs.use\");\r\n\t\tgetConfig().addDefault(\"Permissions.Chat.Clear\", \"rsystem.chat.cleat\");\r\n\t\t//getConfig().addDefault(\"Permissions.StaffChat.Chat\", \"rsystem.staffchat.chat\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Chatfilter.ReporterName\", \"ChatController\");\r\n\t\tgetConfig().addDefault(\"Chatfilter.Cursed-Words.Match-for-action-in-Percentage\", 50);\r\n\t\tgetConfig().addDefault(\"Chatfilter.Cursed-Words.AutoReport.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Chatfilter.Cursed-Words.AutoReport.Reason\", \"Insult\");\r\n\t\tgetConfig().addDefault(\"Chatfilter.Cursed-Words.Block-Message.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Chatfilter.Advertisment.AutoReport.Enable\", true);\r\n\t\tgetConfig().addDefault(\"Chatfilter.Advertisment.AutoReport.Reason\", \"Advertisment\");\r\n\t\tgetConfig().addDefault(\"Chatfilter.Advertisment.Block-Message.Enable\", true);\r\n\r\n\t\t\r\n\t\tArrayList<String> whitelist = new ArrayList<>();\r\n\t\t\r\n\t\twhitelist.add(\"yourserver.de\");\r\n\t\twhitelist.add(\"forum.yourserver.de\");\r\n\t\twhitelist.add(\"ts.yourserver.de\");\r\n\t\twhitelist.add(\"shop.yourserver.de\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Chatfilter.Advertisment.Whitelist\", whitelist);\r\n\t\t\r\n\t\tArrayList<String> blocked = new ArrayList<>();\r\n\t\t\r\n\t\tblocked.add(\".ac\");\r\n\t\tblocked.add(\".ad\");\r\n\t\tblocked.add(\".ae\");\r\n\t\tblocked.add(\".aero\");\r\n\t\tblocked.add(\".af\");\r\n\t\tblocked.add(\".ag\");\r\n\t\tblocked.add(\".ai\");\r\n\t\tblocked.add(\".al\");\r\n\t\tblocked.add(\".am\");\r\n\t\tblocked.add(\".an\");\r\n\t\tblocked.add(\".am\");\r\n\t\tblocked.add(\".an\");\r\n\t\tblocked.add(\".ao\");\r\n\t\tblocked.add(\".aq\");\r\n\t\tblocked.add(\".ar\");\r\n\t\tblocked.add(\".as\");\r\n\t\tblocked.add(\".asia\");\r\n\t\tblocked.add(\".at\");\r\n\t\tblocked.add(\".au\");\r\n\t\tblocked.add(\".aw\");\r\n\t\tblocked.add(\".ax\");\r\n\t\tblocked.add(\".az\");\r\n\t\tblocked.add(\".de\");\r\n\t\tblocked.add(\".com\");\r\n\t\tblocked.add(\".net\");\r\n\t\tblocked.add(\".org\");\r\n\t\tblocked.add(\".eu\");\r\n\t\tblocked.add(\".be\");\r\n\t\tblocked.add(\".nl\");\r\n\t\tblocked.add(\".me\");\r\n\t\tblocked.add(\".ch\");\r\n\t\tblocked.add(\".info\");\r\n\t\tblocked.add(\".dev\");\r\n\t\t\r\n\t\tgetConfig().addDefault(\"Chatfilter.Advertisment.Blocked-Domains\", blocked);\r\n\t\t\r\n\t\tsaveConfig();\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Generated §8(§econfig.yml§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Fetching... §8(§eTranslations from translate.lacodev.de§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t\ttranslator.init();\r\n\t\t\r\n\t\ttranslator.fetch(getConfig().getString(\"General.Language\").substring(0, 2));\r\n\t\t\r\n\t\tif(getConfig().getBoolean(\"General.Custom-Messages.Enable\")) {\r\n\t\t\ttranslator.fetchCustom(getConfig().getString(\"General.Custom-Messages.Rest-API-Key\"));\r\n\t\t}\r\n\r\n\t\t\r\n\t\tFile mysql = new File(\"plugins//\" + this.getDescription().getName() + \"//mysql.yml\");\r\n\t\tYamlConfiguration mcfg = YamlConfiguration.loadConfiguration(mysql);\r\n\t\t\r\n\t\tif(!mysql.exists()) {\r\n\t\t\tmcfg.set(\"MySQL.HOST\", \"host\");\r\n\t\t\tmcfg.set(\"MySQL.PORT\", \"3306\");\r\n\t\t\tmcfg.set(\"MySQL.DATABASE\", \"database\");\r\n\t\t\tmcfg.set(\"MySQL.USERNAME\", \"username\");\r\n\t\t\tmcfg.set(\"MySQL.PASSWORD\", \"password\");\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tmcfg.save(mysql);\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Generated §8(§emysql.yml§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §cERROR while generating file §8(§emysql.yml§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void applyConfigs() {\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Applying values... §8(§econfig.yml§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t\thost = getMySQLFile().getString(\"MySQL.HOST\");\r\n\t\tport = getMySQLFile().getString(\"MySQL.PORT\");\r\n\t\tdatabase = getMySQLFile().getString(\"MySQL.DATABASE\");\r\n\t\tusername = getMySQLFile().getString(\"MySQL.USERNAME\");\r\n\t\tpassword = getMySQLFile().getString(\"MySQL.PASSWORD\");\r\n\t\t\r\n\t\tif(getConfig().getString(\"General.System-Prefix\").contains(\"%double_arrow%\")) {\r\n\t\t\tprefix = ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"General.System-Prefix\").replace(\"%double_arrow%\", \"»\"));\r\n\t\t} else {\r\n\t\t\tprefix = ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"General.System-Prefix\"));\r\n\t\t}\r\n\t\t\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» Applied values §8(§econfig.yml§8)\");\r\n\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static String getMSG(String key) {\r\n\t\t\r\n\t\treturn ChatColor.translateAlternateColorCodes('&', translator.getTranslation(key)).replace(\"%newline%\", \"\\n\");\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic YamlConfiguration getMySQLFile() {\r\n\t\tFile mysql = new File(\"plugins//\" + this.getDescription().getName() + \"//mysql.yml\");\r\n\t\tYamlConfiguration mcfg = YamlConfiguration.loadConfiguration(mysql);\r\n\t\t\r\n\t\tif(mysql.exists()) {\r\n\t\t\treturn mcfg;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic YamlConfiguration getLanguageFile() {\r\n\t\t\r\n\t\tFile lang = new File(\"plugins//\" + getInstance().getDescription().getName() + \"//lang//\"+ getInstance().getConfig().getString(\"General.Language\") +\".yml\");\r\n\t\tYamlConfiguration cfg = YamlConfiguration.loadConfiguration(lang);\r\n\t\t\r\n\t\tFile flang = new File(\"plugins//\" + getInstance().getDescription().getName() + \"//lang//en_US.yml\");\r\n\t\tYamlConfiguration fcfg = YamlConfiguration.loadConfiguration(flang);\r\n\t\t\r\n\t\tif(lang.exists()) {\r\n\t\t\treturn cfg;\r\n\t\t} else if(flang.exists()) {\r\n\t\t\treturn fcfg;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static String getPermissionNotice(String config) {\r\n\t\tif(getInstance().getConfig().getString(config) != null) {\r\n\t\t\treturn ChatColor.stripColor(getInstance().getConfig().getString(config));\r\n\t\t} else {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §cFAILED §8(§7Message Output§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\treturn \"Permission failed to load\";\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tpublic JSONObject readJsonFromUrl(String url) {\r\n\t\tJSONParser parser = new JSONParser();\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tJSONObject jsonObject = (JSONObject) parser.parse(new InputStreamReader(new URL(url + \"?latest\").openStream(), Charset.forName(\"UTF-8\")));\r\n\t\t\t\r\n\t\t\treturn jsonObject;\r\n\t\t} catch (IOException | ParseException | ClassCastException e) {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lFAILED §8(§7Versioncheck§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic void checkLizenz(URL url) {\r\n\t\ttry {\r\n\t\t\tJSONObject ob = (JSONObject) readJsonFromUrl(url.toString()).get(\"1\");\r\n\t\t\tString latestversion = (String) ob.get(\"version\");\r\n\t\t\t\r\n\t\t\tlizenz = Double.valueOf(latestversion.replaceAll(\"\\\\D+\", \"\"));\r\n\t\t\tversion = Double.valueOf(this.getDescription().getVersion().replaceAll(\"\\\\D+\", \"\"));\r\n\t\t\t\r\n\t\t\tif(version >= lizenz) {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §a§lSUCCESS §8(§7Versioncheck§8)\");\r\n\t\t\t\tif(version > lizenz) {\r\n\t\t\t\t\texperimental = true;\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§7You are using an §dexperimental build§7!\");\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlatest = true;\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§7You are using the §alatest build§7!\");\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §a§lSUCCESS §8(§7Versioncheck§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cThere is an update available!\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§8» §ehttps://www.spigotmc.org/resources/staffcore-1-7-1-15.48655/updates\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t}\r\n\t\t} catch(NullPointerException e) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static String getPrefix() {\r\n\t\treturn prefix;\r\n\t}\r\n\t\r\n    private boolean setupEconomy() {\r\n        if (getServer().getPluginManager().getPlugin(\"Vault\") == null) {\r\n            return false;\r\n        }\r\n        RegisteredServiceProvider<Economy> rsp = getServer().getServicesManager().getRegistration(Economy.class);\r\n        if (rsp == null) {\r\n            return false;\r\n        }\r\n        econ = rsp.getProvider();\r\n        return econ != null;\r\n    }\r\n    \r\n    public static TranslationHandler getTranslator() {\r\n    \treturn translator;\r\n    }\r\n    \r\n    public static AntiMCLeaksHandler getAntiMCLeaksHandler() {\r\n    \treturn antimcleakshandler;\r\n    }\r\n    \r\n\tpublic static Main getInstance() {\r\n\t\treturn instance;\r\n\t}\r\n\r\n\tpublic static Economy getEconomy() {\r\n\t\treturn econ;\r\n\t}\r\n\t\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/Main.java b/src/de/lacodev/rsystem/Main.java
--- a/src/de/lacodev/rsystem/Main.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/Main.java	(date 1610224928223)
@@ -590,6 +590,12 @@
 
 		//ChatClear Command
 		getCommand("chatclear").setExecutor(new CMD_ChatClear());
+
+		//Broadcast Command
+		getCommand("broadcast").setExecutor(new CMD_BroadCast());
+
+		//GlobalMute Command
+		getCommand("globalmute").setExecutor(new CMD_MuteGlobal());
 	}
 
 	public void onDisable() {
@@ -688,6 +694,8 @@
 		getConfig().addDefault("Permissions.Ban.List", "rsystem.ban.list");
 		getConfig().addDefault("Permissions.Mute.Use", "rsystem.mute.use");
 		getConfig().addDefault("Permissions.Mute.Notify", "rsystem.mute.notify");
+		getConfig().addDefault("Permissions.Mute.Global.Change", "rsystem.mute.global.change");
+		getConfig().addDefault("Permissions.Mute.Global.Write", "rsystem.mute.global.write");
 		getConfig().addDefault("Permissions.UnBan.Use", "rsystem.unban.use");
 		getConfig().addDefault("Permissions.UnBan.Notify", "rsystem.unban.notify");
 		getConfig().addDefault("Permissions.UnMute.Use", "rsystem.unmute.use");
@@ -701,6 +709,7 @@
 		getConfig().addDefault("Permissions.Warns.See", "rsystem.warns.see");
 		getConfig().addDefault("Permissions.ChatLogs.Use", "rsystem.chatlogs.use");
 		getConfig().addDefault("Permissions.Chat.Clear", "rsystem.chat.cleat");
+		getConfig().addDefault("Permissions.BroadCast.Send", "rsystem.broadcast.send");
 		//getConfig().addDefault("Permissions.StaffChat.Chat", "rsystem.staffchat.chat");
 		
 		getConfig().addDefault("Chatfilter.ReporterName", "ChatController");
Index: src/de/lacodev/rsystem/utils/BanManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.utils;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\nimport java.util.Random;\r\n\r\nimport de.lacodev.staffcore.api.events.*;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.Effect;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.Sound;\r\nimport org.bukkit.entity.Entity;\r\nimport org.bukkit.entity.EntityType;\r\nimport org.bukkit.entity.Guardian;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.entity.Zombie;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.scheduler.BukkitRunnable;\r\n\r\nimport com.connorlinfoot.actionbarapi.ActionBarAPI;\r\n\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.enums.XMaterial;\r\nimport de.lacodev.rsystem.mysql.MySQL;\r\nimport de.lacodev.rsystem.objects.BanReasons;\r\nimport de.lacodev.rsystem.objects.MuteReasons;\r\n\r\npublic class BanManager {\r\n\t\r\n\tpublic static ArrayList<Player> freezed = new ArrayList<>();\r\n\tpublic static ArrayList<String> sound_enums = new ArrayList<>();\r\n\t\r\n\tpublic static Inventory baninv;\r\n\tpublic static Inventory muteinv;\r\n\t\r\n\tpublic static int getWarns(String UUID) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT WARNS FROM ReportSystem_playerdb WHERE UUID = '\"+ UUID +\"'\");\r\n\t\t\t\r\n\t\t\tif(rs != null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\treturn rs.getInt(\"WARNS\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static void warnPlayer(Player t, String team_uuid, String reason) {\r\n\t\tif(!SystemManager.isProtected(t.getUniqueId().toString())) {\r\n\t\t\t\tBukkit.getScheduler().runTaskAsynchronously(Main.getInstance(), () -> {\r\n\t\t\t\t\tMySQL.update(\"INSERT INTO ReportSystem_warnsdb(UUID,TEAM_UUID,REASON) VALUES ('\"+ t.getUniqueId().toString() +\"','\"+ team_uuid +\"','\"+ reason +\"')\");\r\n\r\n\t\t\t\t\tMySQL.update(\"UPDATE ReportSystem_playerdb SET WARNS = '\"+ (getWarns(t.getUniqueId().toString()) + 1) +\"' WHERE UUID = '\"+ t.getUniqueId().toString() +\"'\");\r\n\r\n\t\t\t\t\tString teamUser = \"\";\r\n\t\t\t\t\tif(!team_uuid.matches(\"Console\")) {\r\n\t\t\t\t\t\tteamUser = SystemManager.getUsernameByUUID(team_uuid);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tteamUser = \"Console\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\tBukkit.getPluginManager().callEvent(new PlayerWarnEvent(t, team_uuid, reason));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\tt.sendMessage(Main.getMSG(\"Messages.Layouts.Warn\").replace(\"%team%\", teamUser).replace(\"%reason%\", reason).replace(\"%warns%\", \"\" + (getWarns(t.getUniqueId().toString()) + 1)));\r\n\t\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tsendConsoleNotify(\"PROTECT\", t.getUniqueId().toString());\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tpublic static void openPagedBanInv(Player p, String name, int page) {\r\n\t\tString title = Main.getMSG(\"Messages.Ban-System.Inventory.Title\") + \"§e\" + name;\r\n\t\tif(title.length() > 32) {\r\n\t\t\ttitle = title.substring(0, 32);\r\n\t\t}\r\n\t\tbaninv = p.getServer().createInventory(null, 54, title);\r\n\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tArrayList<BanReasons> rows = new ArrayList<>();\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_reasonsdb WHERE TYPE = 'BAN'\");\r\n\t\t\ttry {\r\n\t\t\t\twhile(rs.next()) {\r\n\t\t\t\t\trows.add(new BanReasons(rs.getString(\"NAME\"), rs.getInt(\"id\"), rs.getLong(\"BAN_LENGTH\")));\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i2 = 0; i2 < 9; i2++) {\r\n\t\t\t\tbaninv.setItem(i2, Data.buildPlace());\r\n\t\t\t}\r\n\t\t\tif (PageManager.page.containsKey(p.getPlayer())) {\r\n\t\t\t\tPageManager.page.remove(p.getPlayer());\r\n\t\t\t}\r\n\t\t\tPageManager.page.put(p.getPlayer(), page);\r\n\r\n\t\t\tfor (int i2 = 45; i2 < 54; i2++) {\r\n\t\t\t\tbaninv.setItem(i2, Data.buildPlace());\r\n\t\t\t}\r\n\t\t\tif (PageManager.isPageValid2(rows, page - 1, 36)) {\r\n\t\t\t\tbaninv.setItem(46, Data.buildItem(XMaterial.LIME_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Ban-System.Inventory.PreviousPage.Available\")));\r\n\t\t\t} else {\r\n\t\t\t\tbaninv.setItem(46, Data.buildItem(XMaterial.RED_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Ban-System.Inventory.PreviousPage.NotAvailable\")));\r\n\t\t\t}\r\n\r\n\t\t\tif (PageManager.isPageValid2(rows, page + 1, 36)) {\r\n\t\t\t\tbaninv.setItem(52, Data.buildItem(XMaterial.LIME_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Ban-System.Inventory.NextPage.Available\")));\r\n\t\t\t} else {\r\n\t\t\t\tbaninv.setItem(52, Data.buildItem(XMaterial.RED_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Ban-System.Inventory.NextPage.NotAvailable\")));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (BanReasons item : PageManager.getPageItems2(rows, page, 36)) {\r\n\t\t\t\tbaninv.setItem(baninv.firstEmpty(), Data.buildItemStack(Material.PAPER, 1, 0, \"§e\" + item.getName(), Main.getMSG(\"Messages.Ban-System.Inventory.BanItem-Lore.1\").replace(\"%target%\", name), Main.getMSG(\"Messages.Ban-System.Inventory.BanItem-Lore.2\").replace(\"%reason%\", item.getName())));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbaninv.setItem(13, Data.buildItem(Material.BARRIER, 1, 0, \"§cNo Connection\"));\r\n\t\t}\r\n\r\n\t\tp.openInventory(baninv);\r\n\t}\r\n\r\n\tpublic static void openPagedMuteInv(Player p, String name, int page) {\r\n\t\tString title = Main.getMSG(\"Messages.Mute-System.Inventory.Title\") + \"§e\" + name;\r\n\t\tif(title.length() > 32) {\r\n\t\t\ttitle = title.substring(0, 32);\r\n\t\t}\r\n\t\tmuteinv = p.getServer().createInventory(null, 54, title);\r\n\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tArrayList<MuteReasons> rows = new ArrayList<>();\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_reasonsdb WHERE TYPE = 'MUTE'\");\r\n\t\t\ttry {\r\n\t\t\t\twhile(rs.next()) {\r\n\t\t\t\t\trows.add(new MuteReasons(rs.getString(\"NAME\"), rs.getInt(\"id\"), rs.getLong(\"BAN_LENGTH\")));\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i2 = 0; i2 < 9; i2++) {\r\n\t\t\t\tmuteinv.setItem(i2, Data.buildPlace());\r\n\t\t\t}\r\n\t\t\tif (PageManager.page.containsKey(p.getPlayer())) {\r\n\t\t\t\tPageManager.page.remove(p.getPlayer());\r\n\t\t\t}\r\n\t\t\tPageManager.page.put(p.getPlayer(), page);\r\n\r\n\t\t\tfor (int i2 = 45; i2 < 54; i2++) {\r\n\t\t\t\tmuteinv.setItem(i2, Data.buildPlace());\r\n\t\t\t}\r\n\t\t\tif (PageManager.isPageValid3(rows, page - 1, 36)) {\r\n\t\t\t\tmuteinv.setItem(46, Data.buildItem(XMaterial.LIME_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Mute-System.Inventory.PreviousPage.Available\")));\r\n\t\t\t} else {\r\n\t\t\t\tmuteinv.setItem(46, Data.buildItem(XMaterial.RED_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Mute-System.Inventory.PreviousPage.NotAvailable\")));\r\n\t\t\t}\r\n\r\n\t\t\tif (PageManager.isPageValid3(rows, page + 1, 36)) {\r\n\t\t\t\tmuteinv.setItem(52, Data.buildItem(XMaterial.LIME_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Mute-System.Inventory.NextPage.Available\")));\r\n\t\t\t} else {\r\n\t\t\t\tmuteinv.setItem(52, Data.buildItem(XMaterial.RED_STAINED_GLASS_PANE, Main.getMSG(\"Messages.Mute-System.Inventory.NextPage.NotAvailable\")));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (MuteReasons item : PageManager.getPageItems3(rows, page, 36)) {\r\n\t\t\t\tmuteinv.setItem(muteinv.firstEmpty(), Data.buildItemStack(Material.PAPER, 1, 0, \"§e\" + item.getName(), Main.getMSG(\"Messages.Mute-System.Inventory.MuteItem-Lore.1\").replace(\"%target%\", name), Main.getMSG(\"Messages.Mute-System.Inventory.MuteItem-Lore.2\").replace(\"%reason%\", item.getName())));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmuteinv.setItem(13, Data.buildItem(Material.BARRIER, 1, 0, \"§cNo Connection\"));\r\n\t\t}\r\n\r\n\t\tp.openInventory(muteinv);\r\n\r\n\t}\r\n\r\n\tpublic static void createBanReason(String name, String unit, int length) {\r\n\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\t\tif(!existsBanReason(name)) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlong time = 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(unit.toLowerCase().matches(\"d\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60*60*24;\r\n\t\t\t\t\t\t} else if(unit.toLowerCase().matches(\"h\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60*60;\r\n\t\t\t\t\t\t} else if(unit.toLowerCase().matches(\"m\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60;\r\n\t\t\t\t\t\t} else if(unit.toLowerCase().matches(\"perma\")) {\r\n\t\t\t\t\t\t\ttime = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"INSERT INTO ReportSystem_reasonsdb(TYPE,NAME,BAN_LENGTH) VALUES ('BAN','\"+ name +\"','\"+ (time * length) +\"')\");\r\n\t\t\t\t\t\t\tst.executeUpdate();\r\n\r\n\t\t\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new BanReasonCreateEvent(name, unit, length));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}.runTaskAsynchronously(Main.getInstance());\r\n\t}\r\n\t\r\n\r\n\tpublic static boolean existsBanID(int id) {\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT id FROM ReportSystem_reasonsdb WHERE id = '\"+ id +\"' AND TYPE = 'BAN'\");\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif(rs.next()) {\r\n\r\n\t\t\t\t\treturn rs.getString(\"id\") != null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (SQLException e) {\r\n\r\n\t\t\t\te.printStackTrace();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tpublic static Integer getIDFromBanReason(String reason) {\r\n\t\tArrayList<BanReasons> r = getBanReasons();\r\n\t\t\r\n\t\tfor(BanReasons b : r) {\r\n\t\t\tif(b.getName().equals(reason)) {\r\n\t\t\t\treturn b.getID();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static Integer getIDFromMuteReason(String reason) {\r\n\t\tArrayList<MuteReasons> r = getMuteReasons();\r\n\t\t\r\n\t\tfor(MuteReasons b : r) {\r\n\t\t\tif(b.getName().equals(reason)) {\r\n\t\t\t\treturn b.getID();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic static String getBanReasonFromID(int id) {\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT NAME FROM ReportSystem_reasonsdb WHERE id = '\"+ id +\"' AND TYPE = 'BAN'\");\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif(rs.next()) {\r\n\r\n\t\t\t\t\treturn rs.getString(\"NAME\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (SQLException e) {\r\n\r\n\t\t\t\te.printStackTrace();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn \"Unknown\";\r\n\r\n\t}\r\n\t\r\n\tpublic static boolean existsBanReason(String name) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_reasonsdb WHERE TYPE = 'BAN' AND NAME = '\"+ name +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs != null) {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static void deleteBanReason(String name) {\r\n\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"DELETE FROM ReportSystem_reasonsdb WHERE NAME = '\"+ name +\"' AND TYPE = 'BAN'\");\r\n\t\t\t\t\t\tst.executeUpdate();\r\n\r\n\t\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new BanReasonDeleteEvent(name));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}.runTaskAsynchronously(Main.getInstance());\r\n\t}\r\n\t\r\n\tpublic static boolean isBanned(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_bansdb WHERE BANNED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs != null) {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\tif(rs.getLong(\"BAN_END\") == -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(rs.getLong(\"BAN_END\") > System.currentTimeMillis()) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif(unban(uuid)) {\r\n\t\t\t\t\t\t\t\t\tsendConsoleNotify(\"UNBAN\", uuid);\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static boolean unban(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\ttry {\r\n\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"DELETE FROM ReportSystem_bansdb WHERE BANNED_UUID = '\"+ uuid +\"'\");\r\n\t\t\t\tif(st.executeUpdate() > 0) {\r\n\r\n\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new PlayerUnbanEvent(uuid));\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic static void sendConsoleNotify(String string, String uuid) {\r\n\t\tif(string.matches(\"UNBAN\")) {\r\n\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\tif(all.hasPermission(Main.getPermissionNotice(\"Permissions.UnBan.Notify\")) || all.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\"))) {\r\n\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\tActionBarAPI.sendActionBar(all, Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.Unban\").replace(\"%player%\", Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t\tall.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.Unban\").replace(\"%player%\", Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tString msg = Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.Unban\").replace(\"%player%\", Main.getMSG(\"Messages.Ban-System.UnBan.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid));\r\n\t\t\tMain.getInstance().getLogger().info(ChatColor.stripColor(msg));\r\n\t\t} else if(string.matches(\"UNMUTE\")) {\r\n\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\tif(all.hasPermission(Main.getPermissionNotice(\"Permissions.UnMute.Notify\")) || all.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\"))) {\r\n\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\tActionBarAPI.sendActionBar(all, Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.Unmute\").replace(\"%player%\", Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t\tall.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.Unmute\").replace(\"%player%\", Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tString msg = Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.Unmute\").replace(\"%player%\", Main.getMSG(\"Messages.Mute-System.UnMute.Notify.Team.ConsoleName\")).replace(\"%target%\", SystemManager.getUsernameByUUID(uuid));\r\n\t\t\tMain.getInstance().getLogger().info(ChatColor.stripColor(msg));\r\n\t\t} else if(string.matches(\"PROTECT\")) {\r\n\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\tif(all.hasPermission(Main.getPermissionNotice(\"Permissions.System.Notify\")) || all.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\"))) {\r\n\t\t\t\t\tif(Main.getInstance().actionbar) {\r\n\t\t\t\t\t\tActionBarAPI.sendActionBar(all, Main.getPrefix() + Main.getMSG(\"Messages.System.Player-Protected.Notify\").replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t\tall.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Player-Protected.Notify\").replace(\"%target%\", SystemManager.getUsernameByUUID(uuid)));\r\n\t\t\t\t\t\tall.sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tString msg = Main.getPrefix() + Main.getMSG(\"Messages.System.Player-Protected.Notify\").replace(\"%target%\", SystemManager.getUsernameByUUID(uuid));\r\n\t\t\tMain.getInstance().getLogger().info(ChatColor.stripColor(msg));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static long getRawBanLength(String reason) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT BAN_LENGTH FROM ReportSystem_reasonsdb WHERE NAME = '\"+ reason +\"' AND TYPE = 'BAN'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getLong(\"BAN_LENGTH\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static long getBanEnd(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT BAN_END FROM ReportSystem_bansdb WHERE BANNED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getLong(\"BAN_END\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static String getBanReason(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT REASON FROM ReportSystem_bansdb WHERE BANNED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getString(\"REASON\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"Unknown\";\r\n\t}\r\n\t\r\n\r\n\tpublic static ArrayList<BanReasons> getBanReasons() {\r\n\r\n\t\tArrayList<BanReasons> reasons = new ArrayList<>();\r\n\r\n\r\n\r\n\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_reasonsdb WHERE TYPE = 'BAN'\");\r\n\r\n\r\n\r\n\t\ttry {\r\n\r\n\t\t\twhile(rs.next()) {\r\n\r\n\t\t\t\treasons.add(new BanReasons(rs.getString(\"NAME\"), rs.getInt(\"id\"), rs.getLong(\"BAN_LENGTH\")));\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn reasons;\r\n\r\n\t\t} catch (SQLException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t}\r\n\r\n\t\treturn reasons;\r\n\r\n\t}\r\n\t\r\n\tprivate static void addBan(String uuid) {\r\n\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"UPDATE ReportSystem_playerdb SET BANS = '\"+ (getBans(uuid) + 1) +\"' WHERE UUID = '\"+ uuid +\"'\");\r\n\t\t\t\t\t\tst.executeUpdate();\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}.runTaskAsynchronously(Main.getInstance());\r\n\t}\r\n\r\n\tpublic static int getBans(String uuid) {\r\n\t\tResultSet rs = MySQL.getResult(\"SELECT BANS FROM ReportSystem_playerdb WHERE UUID = '\"+ uuid +\"'\");\r\n\t\ttry {\r\n\t\t\tif(rs.next()) {\r\n\t\t\t\treturn rs.getInt(\"BANS\");\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static String getBanFinalEnd(String UUID) {\r\n\t\tlong uhrzeit = System.currentTimeMillis();\r\n\t\tlong end = getBanEnd(UUID);\r\n\t\t\r\n\t\tlong millis = end - uhrzeit;\r\n\t\t\r\n\t\tlong sekunden = 0L;\r\n\t\tlong minuten = 0L;\r\n\t\tlong stunden = 0L;\r\n\t\tlong tage = 0L;\r\n\t\t\r\n\t\twhile(millis >= 1000L) {\r\n\t\t\tmillis -= 1000L;\r\n\t\t\tsekunden += 1L;\r\n\t\t}\r\n\t\twhile(sekunden >= 60L) {\r\n\t\t\tsekunden -= 60L;\r\n\t\t\tminuten += 1L;\r\n\t\t}\r\n\t\twhile(minuten >= 60L) {\r\n\t\t\tminuten -= 60L;\r\n\t\t\tstunden += 1L;\r\n\t\t}\r\n\t\twhile(stunden >= 24L) {\r\n\t\t\tstunden -= 24L;\r\n\t\t\ttage += 1L;\r\n\t\t}\r\n\t\tif (tage != 0L) {\r\n\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden != 0L)) {\r\n\t\t\treturn \"§a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Seconds\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden == 0L) && (minuten != 0L)) {\r\n\t\t\treturn \"§a\" + minuten + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Seconds\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden == 0L) && (minuten == 0L) && (sekunden != 0L)) {\r\n\t\t\treturn \"§a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Seconds\");\r\n\t\t}\r\n\t\treturn \"§4Fehler in der Berechnung!\";\r\n\t}\r\n\t\r\n\tpublic static String getBanLength(long end) {\r\n\t\tif(end != -1) {\r\n\t\t\tlong millis = end;\r\n\t\t\t\r\n\t\t\tlong sekunden = 0;\r\n\t\t\tlong minuten = 0;\r\n\t\t\tlong stunden = 0;\r\n\t\t\tlong tage = 0;\r\n\t\t\t\r\n\t\t\twhile(millis >= 1000) {\r\n\t\t\t\tmillis -= 1000;\r\n\t\t\t\tsekunden += 1;\r\n\t\t\t}\r\n\t\t\twhile(sekunden >= 60) {\r\n\t\t\t\tsekunden -= 60;\r\n\t\t\t\tminuten += 1;\r\n\t\t\t}\r\n\t\t\twhile(minuten >= 60) {\r\n\t\t\t\tminuten -= 60;\r\n\t\t\t\tstunden += 1;\r\n\t\t\t}\r\n\t\t\twhile(stunden >= 24) {\r\n\t\t\t\tstunden -= 24;\r\n\t\t\t\ttage += 1;\r\n\t\t\t}\r\n\t\t\tif (tage != 0) {\r\n\t\t\t\tif(stunden != 0) {\r\n\t\t\t\t\tif(minuten != 0) {\r\n\t\t\t\t\t\tif(sekunden != 0) {\r\n\t\t\t\t\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(minuten != 0) {\r\n\t\t\t\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Days\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif(stunden != 0) {\r\n\t\t\t\t\tif(minuten != 0) {\r\n\t\t\t\t\t\tif(sekunden != 0) {\r\n\t\t\t\t\t\t\treturn \"§a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Seconds\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"§a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"§a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(minuten != 0) {\r\n\t\t\t\t\t\tif(sekunden != 0) {\r\n\t\t\t\t\t\t\treturn \"§a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Ban.Remaining.Seconds\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"§a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Minutes\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"§4ERROR\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn Main.getMSG(\"Messages.Layouts.Ban.Length-Values.Permanently\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static String getMuteFinalEnd(String UUID) {\r\n\t\tlong uhrzeit = System.currentTimeMillis();\r\n\t\tlong end = getMuteEnd(UUID);\r\n\t\t\r\n\t\tlong millis = end - uhrzeit;\r\n\t\t\r\n\t\tlong sekunden = 0L;\r\n\t\tlong minuten = 0L;\r\n\t\tlong stunden = 0L;\r\n\t\tlong tage = 0L;\r\n\t\t\r\n\t\twhile(millis > 1000L) {\r\n\t\t\tmillis -= 1000L;\r\n\t\t\tsekunden += 1L;\r\n\t\t}\r\n\t\twhile(sekunden > 60L) {\r\n\t\t\tsekunden -= 60L;\r\n\t\t\tminuten += 1L;\r\n\t\t}\r\n\t\twhile(minuten > 60L) {\r\n\t\t\tminuten -= 60L;\r\n\t\t\tstunden += 1L;\r\n\t\t}\r\n\t\twhile(stunden > 24L) {\r\n\t\t\tstunden -= 24L;\r\n\t\t\ttage += 1L;\r\n\t\t}\r\n\t\tif (tage != 0L) {\r\n\t\t\treturn \"§a\" + tage + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Days\") +\" §a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Hours\") +\" §a\" + minuten + \" §7\" + Main.getMSG(\"Messages.Layouts.Mute.Remaining.Minutes\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden != 0L)) {\r\n\t\t\treturn \"§a\" + stunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Hours\") +\" §a\" + minuten + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\" + Main.getMSG(\"Messages.Layouts.Mute.Remaining.Seconds\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden == 0L) && (minuten != 0L)) {\r\n\t\t\treturn \"§a\" + minuten + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Minutes\") +\" §a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Seconds\");\r\n\t\t}\r\n\t\tif ((tage == 0L) && (stunden == 0L) && (minuten == 0L) && (sekunden != 0L)) {\r\n\t\t\treturn \"§a\" + sekunden + \" §7\"+ Main.getMSG(\"Messages.Layouts.Mute.Remaining.Seconds\");\r\n\t\t}\r\n\t\treturn \"§4Fehler in der Berechnung!\";\r\n\t}\r\n\t\r\n\tpublic static void submitBan(String targetuuid, String reason, String team) {\r\n\t\tif(!SystemManager.isProtected(targetuuid)) {\r\n\t\t\tPlayer target = Bukkit.getPlayer(SystemManager.getUsernameByUUID(targetuuid));\r\n\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\t\t\tif(existsBanReason(reason)) {\r\n\r\n\t\t\t\t\t\t\tlong ban_end = 0;\r\n\r\n\t\t\t\t\t\t\tif(getRawBanLength(reason) == -1) {\r\n\t\t\t\t\t\t\t\tban_end = getRawBanLength(reason);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tban_end = getRawBanLength(reason) + System.currentTimeMillis();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"INSERT INTO ReportSystem_bansdb(BANNED_UUID,TEAM_UUID,REASON,BAN_END) VALUES ('\"+ targetuuid +\"','\"+ team +\"','\"+ reason +\"','\"+ ban_end +\"')\");\r\n\t\t\t\t\t\t\t\tif(st.executeUpdate() > 0) {\r\n\t\t\t\t\t\t\t\t\tMySQL.update(\"INSERT INTO ReportSystem_banhistory(BANNED_UUID,TEAM_UUID,REASON,BAN_START,BAN_END) VALUES ('\"+ targetuuid +\"','\"+ team +\"','\"+ reason +\"','\"+ System.currentTimeMillis() +\"','\"+ ban_end +\"')\");\r\n\t\t\t\t\t\t\t\t\taddBan(targetuuid);\r\n\t\t\t\t\t\t\t\t\tif(SystemManager.existsPlayerData(team)) {\r\n\t\t\t\t\t\t\t\t\t\tPlayer p = Bukkit.getPlayer(SystemManager.getUsernameByUUID(team));\r\n\t\t\t\t\t\t\t\t\t\tif(p != null) {\r\n\t\t\t\t\t\t\t\t\t\t\tReportManager.sendNotify(\"BAN\", p.getName(), SystemManager.getUsernameByUUID(targetuuid), reason);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tReportManager.sendNotify(\"BAN\", \"Console\", SystemManager.getUsernameByUUID(targetuuid), reason);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new PlayerBanEvent(targetuuid, reason, team));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t\t\t\t\tif(Main.getInstance().getConfig().getBoolean(\"General.Include-Vault\")) {\r\n\t\t\t\t\t\t\t\t\t\tArrayList<String> reporter_uuids = new ArrayList<>();\r\n\r\n\t\t\t\t\t\t\t\t\t\tResultSet rs1 = MySQL.getResult(\"SELECT * FROM ReportSystem_reportsdb WHERE REPORTED_UUID = '\"+ targetuuid +\"'\");\r\n\t\t\t\t\t\t\t\t\t\tif(rs1.next()) {\r\n\t\t\t\t\t\t\t\t\t\t\twhile(rs1.next()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(!reporter_uuids.contains(rs1.getString(\"REPORTER_UUID\"))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treporter_uuids.add(rs1.getString(\"REPORTER_UUID\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tfor(int i = 0; i < reporter_uuids.size(); i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(SystemManager.existsPlayerData(reporter_uuids.get(i))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPlayer reporter = Bukkit.getPlayer(SystemManager.getUsernameByUUID(reporter_uuids.get(i)));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(reporter != null) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tRandom rdm = new Random();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tint rdmm = rdm.nextInt(Main.getInstance().getConfig().getInt(\"Vault.Rewards.Report.MAX\"));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMain.getEconomy().depositPlayer(reporter, rdmm);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treporter.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Vault.Rewards.Report.Success\").replace(\"%reward%\", String.valueOf(rdmm)));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tActionManager.createAction(\"REPORT_SUCCESS\", reporter_uuids.get(i), target.getName());\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch(Exception e) {\r\n\t\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lFAILED §8(§7Reason does not exist§8)\");\r\n\t\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"§cSystem §8» §c§lFAILED §8(§7MySQL Connection§8)\");\r\n\t\t\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.runTaskAsynchronously(Main.getInstance());\r\n\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif(target != null) {\r\n\t\t\t\t\t\tif(Main.getInstance().getConfig().getBoolean(\"Ban-Animation.Enable\")) {\r\n\t\t\t\t\t\t\tplayBanAnimation(target, reason);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(Main.getInstance().getConfig().getBoolean(\"IP-Ban.Ban-IP-When-Player-Gets-Banned\")) {\r\n\t\t\t\t\t\t\tbanIPAddress(\"Console\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}.runTask(Main.getInstance());\r\n\t\t} else {\r\n\t\t\tsendConsoleNotify(\"PROTECT\", targetuuid);\r\n\t\t}\r\n\t}\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\tpublic static void playBanAnimation(Player t, String reason) {\r\n\t\t\r\n\t\tfreeze(t);\r\n\t\t\r\n\t\tif(Main.getPermissionNotice(\"Ban-Animation.Type\").toLowerCase().equalsIgnoreCase(\"guardian\")) {\r\n\t\t\tif(Bukkit.getVersion().contains(\"(MC: 1.13\") || Bukkit.getVersion().contains(\"(MC: 1.14\") || Bukkit.getVersion().contains(\"(MC: 1.15\") || Bukkit.getVersion().contains(\"(MC: 1.16\")) {\r\n\t\t\t\tint a;\r\n\t\t\t\t\r\n\t\t\t\tEntity en = t.getLocation().getWorld().spawnEntity(t.getLocation().add(-2, 5, -2), EntityType.GUARDIAN);\r\n\t\t\t\t\r\n\t\t\t\tGuardian g = (Guardian) en;\r\n\t\t\t\t\r\n\t\t\t\tg.setGravity(false);\r\n\t\t\t\tg.setSwimming(true);\r\n\t\t\t\tg.setTarget(t);\r\n\t\t\t\tg.setCustomName(\"G1\");\r\n\t\t\t\tg.setCustomNameVisible(false);\r\n\t\t\t\t\r\n\t\t\t\tEntity en2 = t.getLocation().getWorld().spawnEntity(t.getLocation().add(2, 5, -2), EntityType.GUARDIAN);\r\n\t\t\t\t\r\n\t\t\t\tGuardian g2 = (Guardian) en2;\r\n\t\t\t\t\r\n\t\t\t\tg2.setGravity(false);\r\n\t\t\t\tg2.setSwimming(true);\r\n\t\t\t\tg2.setTarget(t);\r\n\t\t\t\tg2.setCustomName(\"G2\");\r\n\t\t\t\tg2.setCustomNameVisible(false);\r\n\t\t\t\t\r\n\t\t\t\tEntity en3 = t.getLocation().getWorld().spawnEntity(t.getLocation().add(0, 5, 2), EntityType.GUARDIAN);\r\n\t\t\t\t\r\n\t\t\t\tGuardian g3 = (Guardian) en3;\r\n\t\t\t\t\r\n\t\t\t\tg3.setInvulnerable(true);\r\n\t\t\t\tg3.setGravity(false);\r\n\t\t\t\tg3.setSwimming(true);\r\n\t\t\t\tg3.setTarget(t);\r\n\t\t\t\tg3.setCustomName(\"G3\");\r\n\t\t\t\tg3.setCustomNameVisible(false);\r\n\t\t\t\t\r\n\t\t\t\tif(sound_enums.contains(Main.getPermissionNotice(\"Ban-Animation.Sound\").toUpperCase())) {\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(Main.getPermissionNotice(\"Ban-Animation.Sound\")), 100, 100);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§cInvalid Sound §8- §7It seems like this sound is not available in this version!\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ta = Bukkit.getScheduler().scheduleAsyncRepeatingTask(Main.getInstance(), () -> {\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tall.playEffect(t.getLocation().add(0, 1, 0), Effect.ZOMBIE_INFECT, 10);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0, 5);\r\n\t\t\t\t\r\n\t\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\tg.setHealth(0);\r\n\t\t\t\t\t\tg2.setHealth(0);\r\n\t\t\t\t\t\tg3.setHealth(0);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\t\tif(sound_enums.contains(\"ENTITY_LIGHTNING_BOLT_THUNDER\")) {\r\n\t\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.ENTITY_LIGHTNING_BOLT_THUNDER, 100, 100);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(\"AMBIENCE_THUNDER\"), 100, 100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.getLocation().getWorld().strikeLightning(t.getLocation());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tBukkit.getScheduler().cancelTask(a);\r\n\t\t\t\t\t\tt.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\t\t\t}\r\n\t\t\t\t}.runTaskLater(Main.getInstance(), 5*20);\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tt.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§cInvalid Enviroment §8- §7\" + Bukkit.getVersion());\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§7Choose one, which is available:\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3Guardian §8(§71.13+§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3TNT §8(§71.7+§8)\");\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3Zombie §8(§71.7+§8)\");\r\n\t\t\t}\r\n\t\t} else if(Main.getPermissionNotice(\"Ban-Animation.Type\").toLowerCase().equalsIgnoreCase(\"zombie\")) {\r\n\t\t\tint a;\r\n\t\t\t\r\n\t\t\tEntity en = t.getLocation().getWorld().spawnEntity(t.getLocation(), EntityType.ZOMBIE);\r\n\t\t\t\r\n\t\t\tZombie z = (Zombie) en;\r\n\t\t\t\r\n\t\t\tz.setTarget(null);\r\n\t\t\tz.setCustomName(\"§cBan §8» §7\" + t.getName());\r\n\t\t\tz.setCustomNameVisible(false);\r\n\t\t\tz.setFireTicks(0);\r\n\t\t\t\r\n\t\t\tif(sound_enums.contains(Main.getPermissionNotice(\"Ban-Animation.Sound\").toUpperCase())) {\r\n\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\tall.hidePlayer(t);\r\n\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(Main.getPermissionNotice(\"Ban-Animation.Sound\")), 100, 100);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§cInvalid Sound §8- §7It seems like this sound is not available in this version!\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ta = Bukkit.getScheduler().scheduleAsyncRepeatingTask(Main.getInstance(), new Runnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tall.playEffect(t.getLocation().add(0, 1, 0), Effect.MOBSPAWNER_FLAMES, 10);\r\n\t\t\t\t\t\tz.teleport(t.getLocation());\r\n\t\t\t\t\t\tif(sound_enums.contains(\"ENTITY_LIGHTNING_BOLT_THUNDER\")) {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.ENTITY_LIGHTNING_BOLT_THUNDER, 100, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(\"AMBIENCE_THUNDER\"), 100, 100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 0, 5);\r\n\t\t\t\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tz.setHealth(0);\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tif(sound_enums.contains(\"ENTITY_LIGHTNING_BOLT_THUNDER\")) {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.ENTITY_LIGHTNING_BOLT_THUNDER, 100, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(\"AMBIENCE_THUNDER\"), 100, 100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.getLocation().getWorld().strikeLightning(t.getLocation());\r\n\t\t\t\t\t\r\n\t\t\t\t\tBukkit.getScheduler().cancelTask(a);\r\n\t\t\t\t\tt.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\t\t}\r\n\t\t\t}.runTaskLater(Main.getInstance(), 5*20);\r\n\t\t} else if(Main.getPermissionNotice(\"Ban-Animation.Type\").toLowerCase().equalsIgnoreCase(\"tnt\")) {\r\n\t\t\tint a;\r\n\t\t\t\r\n\t\t\tif(sound_enums.contains(Main.getPermissionNotice(\"Ban-Animation.Sound\").toUpperCase())) {\r\n\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(Main.getPermissionNotice(\"Ban-Animation.Sound\")), 100, 100);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§cInvalid Sound §8- §7It seems like this sound is not available in this version!\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ta = Bukkit.getScheduler().scheduleAsyncRepeatingTask(Main.getInstance(), new Runnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tall.playEffect(t.getLocation().add(0, 1, 0), Effect.EXTINGUISH, 10);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(sound_enums.contains(\"ENTITY_TNT_PRIMED\")) {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.ENTITY_TNT_PRIMED, 100, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(\"EXPLODE\"), 100, 100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 0, 5);\r\n\t\t\t\r\n\t\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\tif(sound_enums.contains(\"ENTITY_LIGHTNING_BOLT_THUNDER\")) {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.ENTITY_LIGHTNING_BOLT_THUNDER, 100, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tall.playSound(all.getLocation(), Sound.valueOf(\"AMBIENCE_THUNDER\"), 100, 100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.getLocation().getWorld().strikeLightning(t.getLocation());\r\n\t\t\t\t\t\r\n\t\t\t\t\tBukkit.getScheduler().cancelTask(a);\r\n\t\t\t\t\tt.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\t\t}\r\n\t\t\t}.runTaskLater(Main.getInstance(), 2*20);\r\n\t\t} else {\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tt.kickPlayer(Main.getMSG(\"Messages.Ban-System.Player-Kick-Screen\").replace(\"%reason%\", reason));\r\n\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§cInvalid AnimationType!\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(\"\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§7Choose one, which is available:\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3Guardian §8(§71.13+§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3TNT §8(§71.7+§8)\");\r\n\t\t\tBukkit.getConsoleSender().sendMessage(Main.getPrefix() + \"§3Zombie §8(§71.7+§8)\");\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\tpublic static void freeze(Player t) {\r\n\t\tfreezed.add(t);\r\n\t\t\r\n\t\tif(t.getLocation().add(0, -1, 0).getBlock().getType() == Material.AIR) {\r\n\t\t\tt.getLocation().add(0, -1, 0).getBlock().setType(Material.BARRIER);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void unfreeze(Player t) {\r\n\t\tfreezed.remove(t);\r\n\t\t\r\n\t\tif(t.getLocation().add(0, -1, 0).getBlock().getType() == Material.BARRIER) {\r\n\t\t\tt.getLocation().add(0, -1, 0).getBlock().setType(Material.AIR);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic static void banIPAddress(String team, Player target) {\r\n\t\tif(!SystemManager.isProtected(target.getUniqueId().toString())) {\r\n\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\tBukkit.getScheduler().runTaskAsynchronously(Main.getInstance(), new Runnable() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\tif(!isIPBanned(target.getAddress().getAddress().toString())) {\r\n\r\n\t\t\t\t\t\t\tlong current = System.currentTimeMillis();\r\n\t\t\t\t\t\t\tlong hours = 1000*60*60*Main.getInstance().getConfig().getInt(\"IP-Ban.Duration-in-Hours\");\r\n\r\n\t\t\t\t\t\t\tlong end = current + hours;\r\n\r\n\t\t\t\t\t\t\tString ip = target.getAddress().getAddress().toString();\r\n\r\n\t\t\t\t\t\t\tMySQL.update(\"INSERT INTO ReportSystem_ipbans(PLAYERNAME,IP_ADDRESS,END) VALUES ('\"+ target.getName() +\"','\"+ ip +\"','\"+ end +\"')\");\r\n\r\n\r\n\r\n\t\t\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new PlayerIPAdressBanEvent(team, target));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\t\t\t\tif(all.hasPermission(Main.getPermissionNotice(\"Permissions.IpBan.Notify\"))) {\r\n\t\t\t\t\t\t\t\t\tall.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ban-System.IP-Ban.Notify\").replace(\"%player%\", team).replace(\"%target%\", target.getName()).replace(\"%duration%\",\r\n\t\t\t\t\t\t\t\t\t\t\tMain.getInstance().getConfig().getInt(\"IP-Ban.Duration-in-Hours\") + \" \" + Main.getMSG(\"Messages.Layouts.Ban.Remaining.Hours\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\ttarget.kickPlayer(Main.getMSG(\"IP-Ban.Kick-Message\"));\r\n\t\t} else {\r\n\t\t\tsendConsoleNotify(\"PROTECT\", target.getUniqueId().toString());\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void unbanIpAddress(String playername) {\r\n\t\tif(isIpBanned(playername)) {\r\n\t\t\tMySQL.update(\"DELETE FROM ReportSystem_ipbans WHERE PLAYERNAME = '\"+ playername +\"'\");\r\n\r\n\t\t\tBukkit.getServer().getPluginManager().callEvent(new PlayerIPAdressUnBanEvent(playername));\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static boolean isIPBanned(String address) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_ipbans WHERE IP_ADDRESS = '\"+ address +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs != null) {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\tif(rs.getLong(\"END\") > System.currentTimeMillis()) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static boolean isIpBanned(String playername) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_ipbans WHERE PLAYERNAME = '\"+ playername +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs != null) {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\tif(rs.getLong(\"END\") > System.currentTimeMillis()) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void createMuteReason(String name, String unit, int length) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tBukkit.getScheduler().runTaskAsynchronously(Main.getInstance(), new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif(!existsMuteReason(name)) {\r\n\r\n\t\t\t\t\t\tlong time = 0;\r\n\r\n\t\t\t\t\t\tif(unit.toLowerCase().matches(\"d\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60*60*24;\r\n\t\t\t\t\t\t} else if(unit.toLowerCase().matches(\"h\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60*60;\r\n\t\t\t\t\t\t} else if(unit.toLowerCase().matches(\"m\")) {\r\n\t\t\t\t\t\t\ttime = 1000*60;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"INSERT INTO ReportSystem_reasonsdb(TYPE,NAME,BAN_LENGTH) VALUES ('MUTE','\"+ name +\"','\"+ (time * length) +\"')\");\r\n\t\t\t\t\t\t\tst.executeUpdate();\r\n\r\n\t\t\t\t\t\t\tnew BukkitRunnable(){\r\n\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new MuteReasonCreateEvent(name, unit, length));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\tpublic static boolean existsMuteID(int id) {\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT id FROM ReportSystem_reasonsdb WHERE id = '\"+ id +\"' AND TYPE = 'MUTE'\");\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif(rs.next()) {\r\n\r\n\t\t\t\t\treturn rs.getString(\"id\") != null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (SQLException e) {\r\n\r\n\t\t\t\te.printStackTrace();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\r\n\r\n\tpublic static String getMuteReasonFromID(int id) {\r\n\r\n\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT NAME FROM ReportSystem_reasonsdb WHERE id = '\"+ id +\"' AND TYPE = 'MUTE'\");\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif(rs.next()) {\r\n\r\n\t\t\t\t\treturn rs.getString(\"NAME\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (SQLException e) {\r\n\r\n\t\t\t\te.printStackTrace();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn \"Unknown\";\r\n\r\n\t}\r\n\t\r\n\tpublic static boolean existsMuteReason(String name) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT NAME FROM ReportSystem_reasonsdb WHERE NAME = '\"+ name +\"' AND TYPE = 'MUTE'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getString(\"NAME\") != null;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static void deleteMuteReason(String name) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tBukkit.getScheduler().runTaskAsynchronously(Main.getInstance(), new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tif (existsMuteReason(name)) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"DELETE FROM ReportSystem_reasonsdb WHERE NAME = '\" + name + \"' AND TYPE = 'MUTE'\");\r\n\t\t\t\t\t\t\tst.executeUpdate();\r\n\r\n\r\n\t\t\t\t\t\t\tnew BukkitRunnable() {\r\n\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new MuteReasonDeleteEvent(name));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.runTask(Main.getInstance());\r\n\r\n\t\t\t\t\t\t}catch(SQLException e){\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static boolean isMuted(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_mutesdb WHERE MUTED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs != null) {\r\n\t\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\t\tif(rs.getLong(\"MUTE_END\") > System.currentTimeMillis()) {\r\n\t\t\t\t\t\t\treturn rs.getString(\"MUTED_UUID\") != null;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(unmute(uuid)) {\r\n\t\t\t\t\t\t\t\tsendConsoleNotify(\"UNMUTE\", uuid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static boolean unmute(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\ttry {\r\n\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"DELETE FROM ReportSystem_mutesdb WHERE MUTED_UUID = '\"+ uuid +\"'\");\r\n\t\t\t\tif(st.executeUpdate() > 0) {\r\n\t\t\t\t\tBukkit.getPluginManager().callEvent(new PlayerUnMuteEvent(uuid));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tpublic static ArrayList<MuteReasons> getMuteReasons() {\r\n\r\n\t\tArrayList<MuteReasons> reasons = new ArrayList<>();\r\n\r\n\r\n\r\n\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_reasonsdb WHERE TYPE = 'MUTE'\");\r\n\r\n\r\n\r\n\t\ttry {\r\n\r\n\t\t\twhile(rs.next()) {\r\n\r\n\t\t\t\treasons.add(new MuteReasons(rs.getString(\"NAME\"), rs.getInt(\"id\"), rs.getLong(\"BAN_LENGTH\")));\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn reasons;\r\n\r\n\t\t} catch (SQLException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t}\r\n\r\n\t\treturn reasons;\r\n\r\n\t}\r\n\t\r\n\tpublic static long getRawMuteLength(String reason) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT BAN_LENGTH FROM ReportSystem_reasonsdb WHERE NAME = '\"+ reason +\"' AND TYPE = 'MUTE'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getLong(\"BAN_LENGTH\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static long getMuteEnd(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT MUTE_END FROM ReportSystem_mutesdb WHERE MUTED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getLong(\"MUTE_END\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static String getMuteReason(String uuid) {\r\n\t\tif(MySQL.isConnected()) {\r\n\t\t\tResultSet rs = MySQL.getResult(\"SELECT REASON FROM ReportSystem_mutesdb WHERE MUTED_UUID = '\"+ uuid +\"'\");\r\n\t\t\ttry {\r\n\t\t\t\tif(rs.next()) {\r\n\t\t\t\t\treturn rs.getString(\"REASON\");\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"Unknown\";\r\n\t}\r\n\t\r\n\tprivate static void addMute(String uuid) {\r\n\t\tMySQL.update(\"UPDATE ReportSystem_playerdb SET MUTES = '\"+ (getMutes(uuid) + 1) +\"' WHERE UUID = '\"+ uuid +\"'\");\r\n\t}\r\n\r\n\tpublic static int getMutes(String uuid) {\r\n\t\tResultSet rs = MySQL.getResult(\"SELECT MUTES FROM ReportSystem_playerdb WHERE UUID = '\"+ uuid +\"'\");\r\n\t\ttry {\r\n\t\t\tif(rs.next()) {\r\n\t\t\t\treturn rs.getInt(\"MUTES\");\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tpublic static boolean submitMute(String targetuuid, String reason, String team) {\r\n\t\tif(!SystemManager.isProtected(targetuuid)) {\r\n\t\t\tif(MySQL.isConnected()) {\r\n\t\t\t\tif(existsMuteReason(reason)) {\r\n\r\n\t\t\t\t\tlong ban_end = getRawMuteLength(reason) + System.currentTimeMillis();\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tPreparedStatement st = MySQL.getCon().prepareStatement(\"INSERT INTO ReportSystem_mutesdb(MUTED_UUID,TEAM_UUID,REASON,MUTE_END) VALUES ('\"+ targetuuid +\"','\"+ team +\"','\"+ reason +\"','\"+ ban_end +\"')\");\r\n\t\t\t\t\t\tif(st.executeUpdate() > 0) {\r\n\t\t\t\t\t\t\taddMute(targetuuid);\r\n\t\t\t\t\t\t\tif(SystemManager.existsPlayerData(team)) {\r\n\t\t\t\t\t\t\t\tPlayer p = Bukkit.getPlayer(SystemManager.getUsernameByUUID(targetuuid));\r\n\t\t\t\t\t\t\t\tif(p != null) {\r\n\t\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Mute-System.Message-If-Player-Muted\").replace(\"%reason%\", reason));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tReportManager.sendNotify(\"MUTE\", SystemManager.getUsernameByUUID(team), SystemManager.getUsernameByUUID(targetuuid), reason);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tReportManager.sendNotify(\"MUTE\", \"Console\", SystemManager.getUsernameByUUID(targetuuid), reason);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tBukkit.getServer().getPluginManager().callEvent(new PlayerMuteEvent(targetuuid, reason, team));\r\n\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsendConsoleNotify(\"PROTECT\", targetuuid);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/utils/BanManager.java b/src/de/lacodev/rsystem/utils/BanManager.java
--- a/src/de/lacodev/rsystem/utils/BanManager.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/utils/BanManager.java	(date 1610223386008)
@@ -36,7 +36,24 @@
 	
 	public static Inventory baninv;
 	public static Inventory muteinv;
-	
+	private static boolean gMute;
+
+
+	//Glob Mute
+
+	public static void setGlobalMute(boolean mute){
+		gMute = mute;
+	}
+
+	public static boolean isGMute(){
+		return gMute;
+	}
+
+
+
+
+
+
 	public static int getWarns(String UUID) {
 		if(MySQL.isConnected()) {
 			ResultSet rs = MySQL.getResult("SELECT WARNS FROM ReportSystem_playerdb WHERE UUID = '"+ UUID +"'");
Index: src/de/lacodev/rsystem/listeners/Listener_PanelManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.listeners;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URISyntaxException;\r\nimport java.net.URL;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.inventory.InventoryClickEvent;\r\n\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.mysql.MySQL;\r\nimport de.lacodev.rsystem.utils.PageManager;\r\nimport de.lacodev.rsystem.utils.PanelManager;\r\nimport de.lacodev.rsystem.utils.SystemManager;\r\nimport de.lacodev.rsystem.utils.WebUIHandler;\r\nimport net.md_5.bungee.api.ChatColor;\r\nimport net.md_5.bungee.api.chat.ClickEvent;\r\nimport net.md_5.bungee.api.chat.ClickEvent.Action;\r\nimport net.md_5.bungee.api.chat.ComponentBuilder;\r\nimport net.md_5.bungee.api.chat.HoverEvent;\r\nimport net.md_5.bungee.api.chat.TextComponent;\r\n\r\npublic class Listener_PanelManager implements Listener {\r\n\t\r\n\t@SuppressWarnings(\"deprecation\")\r\n\t@EventHandler\r\n\tpublic void onPanel(InventoryClickEvent e) {\r\n\t\tPlayer p = (Player) e.getWhoClicked();\r\n\t\tPanelManager manager = new PanelManager();\r\n\t\t\r\n\t\tif(e.getView().getTitle().equalsIgnoreCase(\"§cStaffCore §8- §7MainMenu\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§cReport a Bug\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tp.sendMessage(\"\");\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Bug-Report.Created\"));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tTextComponent tc = new TextComponent();\r\n\t\t\t\t\t\ttc.setText(Main.getMSG(\"Messages.System.Bug-Report.Button\"));\r\n\t\t\t\t\t\tURL url;\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\turl = new URL(\"https://bugreport.lacodev.de/?product=staffcore&version=\" + Main.getInstance().getDescription().getVersion() + \"&env=\" + Bukkit.getVersion().replace(\"(\", \"\").replace(\")\", \"\").replace(\" \", \"%20\") + \"&mysql=\" + MySQL.isConnected());\r\n\t\t\t\t\t\t\ttc.setClickEvent(new ClickEvent(Action.OPEN_URL, url.toURI().toASCIIString()));\r\n\t\t\t\t\t\t\ttc.setHoverEvent(new HoverEvent(net.md_5.bungee.api.chat.HoverEvent.Action.SHOW_TEXT, new ComponentBuilder(Main.getMSG(\"Messages.System.Bug-Report.Hover-Text\")).create()));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tp.spigot().sendMessage(tc);\r\n\t\t\t\t\t\t} catch (MalformedURLException | URISyntaxException e1) {\r\n\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tp.sendMessage(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Player-Management\")) {\r\n\t\t\t\t\t\tmanager.openPlayerManagement(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Settings\")) {\r\n\t\t\t\t\t\tmanager.openSettingsMenu(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().equalsIgnoreCase(\"§cStaffCore §8- §7Settings\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§c◄ Go back\")) {\r\n\t\t\t\t\t\tmanager.openMainMenu(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§aDownload Latest Release\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!Main.getInstance().latest) {\r\n\t\t\t\t\t\t\tSystemManager.downloadLatestVersion(p);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7You are using the §alatest build§7!\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§6Download Latest Experimental\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tSystemManager.downloadExperimentalVersion(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§a►\")) {\r\n\t\t\t\t\t\tString lang = ChatColor.stripColor(e.getInventory().getItem(31).getItemMeta().getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(lang.matches(\"de\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"us\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"us\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"nl\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"nl\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"dk\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"dk\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"ru\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"ru\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"es\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"es\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"fr\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"fr\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"it\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"it\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"cz\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"cz\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"fi\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"fi\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"ee\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"ee\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"hr\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"hr\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"cn\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"cn\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"de\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tMain.getTranslator().fetch(Main.getInstance().getConfig().getString(\"General.Language\").substring(0, 2));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§a◄\")) {\r\n\t\t\t\t\t\tString lang = ChatColor.stripColor(e.getInventory().getItem(31).getItemMeta().getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(lang.matches(\"de\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"cn\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t\tif(lang.matches(\"cn\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"hr\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"hr\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"ee\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"ee\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"fi\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"fi\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"cz\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"cz\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"it\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"it\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"fr\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"fr\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"es\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"es\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"ru\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"ru\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"dk\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"dk\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"nl\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"nl\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"us\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(lang.matches(\"us\")) {\r\n\t\t\t\t\t\t\tMain.getInstance().getConfig().set(\"General.Language\", \"de\");\r\n\t\t\t\t\t\t\tMain.getInstance().saveConfig();\r\n\t\t\t\t\t\t\tMain.getInstance().reloadConfig();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPanelManager.settings.setItem(31, manager.getLanguageHead());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tMain.getTranslator().fetch(Main.getInstance().getConfig().getString(\"General.Language\").substring(0, 2));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Reload §cStaffCore\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tSystemManager.reloadStaffCore(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Setup §cStaffCore-UI\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tWebUIHandler.setupStaffCoreUI(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().equalsIgnoreCase(\"§cPlayer-Management\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§c◄ Go back\")) {\r\n\t\t\t\t\t\tmanager.openMainMenu(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Manage OnlinePlayers\")) {\r\n\t\t\t\t\t\tmanager.openOnlinePlayerMenu(p, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§7Protect a player\")) {\r\n\t\t\t\t\t\tmanager.openProtectionInventory(p, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().equalsIgnoreCase(\"§cManage OnlinePlayers\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§c◄ Go back\")) {\r\n\t\t\t\t\t\tmanager.openPlayerManagement(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§a◄\")) {\r\n\t\t\t\t\t\tmanager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()) - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§a►\")) {\r\n\t\t\t\t\t\tmanager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()) - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (e.getSlot() > 8 && e.getSlot() < 45) {\r\n\t\t\t\t\t\tString target = ChatColor.stripColor(e.getCurrentItem().getItemMeta().getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmanager.openPlayerMenu(p, target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(e.getView().getTitle().endsWith(\"§8- §cStaffCore\")) {\r\n\t\t\te.setCancelled(true);\r\n\t\t\t\r\n\t\t\tif(e.getCurrentItem() != null) {\r\n\t\t\t\tif(e.getCurrentItem().hasItemMeta()) {\r\n\t\t\t\t\tString s = e.getView().getTitle().replace(\"§8- §cStaffCore\", \"\");\r\n\t\t\t\t\tString targetname = ChatColor.stripColor(s);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§c◄ Go back\")) {\r\n\t\t\t\t\t\tmanager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§cCheck Player\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\tp.performCommand(\"check \" + targetname);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§cMute Player\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\tp.performCommand(\"mute \" + targetname);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(\"§cBan Player\")) {\r\n\t\t\t\t\t\tp.closeInventory();\r\n\t\t\t\t\t\tp.performCommand(\"ban \" + targetname);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/de/lacodev/rsystem/listeners/Listener_PanelManager.java b/src/de/lacodev/rsystem/listeners/Listener_PanelManager.java
--- a/src/de/lacodev/rsystem/listeners/Listener_PanelManager.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/listeners/Listener_PanelManager.java	(date 1610274242809)
@@ -5,6 +5,7 @@
 import java.net.URL;
 
 import org.bukkit.Bukkit;
+import org.bukkit.ChatColor;
 import org.bukkit.entity.Player;
 import org.bukkit.event.EventHandler;
 import org.bukkit.event.Listener;
@@ -16,7 +17,6 @@
 import de.lacodev.rsystem.utils.PanelManager;
 import de.lacodev.rsystem.utils.SystemManager;
 import de.lacodev.rsystem.utils.WebUIHandler;
-import net.md_5.bungee.api.ChatColor;
 import net.md_5.bungee.api.chat.ClickEvent;
 import net.md_5.bungee.api.chat.ClickEvent.Action;
 import net.md_5.bungee.api.chat.ComponentBuilder;
@@ -31,12 +31,12 @@
 		Player p = (Player) e.getWhoClicked();
 		PanelManager manager = new PanelManager();
 		
-		if(e.getView().getTitle().equalsIgnoreCase("§cStaffCore §8- §7MainMenu")) {
+		if(e.getView().getTitle().equalsIgnoreCase(ChatColor.RED + "Staffcore" + ChatColor.DARK_GRAY + " - " + ChatColor.GRAY + "MainMenu")) {
 			e.setCancelled(true);
 			
 			if(e.getCurrentItem() != null) {
 				if(e.getCurrentItem().hasItemMeta()) {
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§cReport a Bug")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "Report a Bug")) {
 						p.closeInventory();
 						
 						p.sendMessage("");
@@ -56,39 +56,39 @@
 						}
 						p.sendMessage("");
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Player-Management")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Player-Management")) {
 						manager.openPlayerManagement(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Settings")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Settings")) {
 						manager.openSettingsMenu(p);
 					}
 				}
 			}
 		}
 		
-		if(e.getView().getTitle().equalsIgnoreCase("§cStaffCore §8- §7Settings")) {
+		if(e.getView().getTitle().equalsIgnoreCase(ChatColor.RED + "StaffCore " + ChatColor.DARK_GRAY + "- " + ChatColor.GRAY + "Settings")) {
 			e.setCancelled(true);
 			
 			if(e.getCurrentItem() != null) {
 				if(e.getCurrentItem().hasItemMeta()) {
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§c◄ Go back")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "◄ Go back")) {
 						manager.openMainMenu(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§aDownload Latest Release")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GREEN + "Download Latest Release")) {
 						p.closeInventory();
 						
 						if(!Main.getInstance().latest) {
 							SystemManager.downloadLatestVersion(p);
 						} else {
-							p.sendMessage(Main.getPrefix() + "§7You are using the §alatest build§7!");
+							p.sendMessage(Main.getPrefix() + ChatColor.GRAY + "You are using the " + ChatColor.GREEN + "latest build" + ChatColor.GRAY + "!");
 						}
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§6Download Latest Experimental")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GOLD + "Download Latest Experimental")) {
 						p.closeInventory();
 						
 						SystemManager.downloadExperimentalVersion(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§a►")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GREEN + "►")) {
 						String lang = ChatColor.stripColor(e.getInventory().getItem(31).getItemMeta().getDisplayName());
 						
 						if(lang.matches("de")) {
@@ -184,7 +184,7 @@
 						}
 						Main.getTranslator().fetch(Main.getInstance().getConfig().getString("General.Language").substring(0, 2));
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§a◄")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GREEN + "◄")) {
 						String lang = ChatColor.stripColor(e.getInventory().getItem(31).getItemMeta().getDisplayName());
 						
 						if(lang.matches("de")) {
@@ -281,12 +281,12 @@
 						
 						Main.getTranslator().fetch(Main.getInstance().getConfig().getString("General.Language").substring(0, 2));
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Reload §cStaffCore")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Reload " + ChatColor.RED + "StaffCore")) {
 						p.closeInventory();
 						
 						SystemManager.reloadStaffCore(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Setup §cStaffCore-UI")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Setup " + ChatColor.RED + "StaffCore-UI")) {
 						p.closeInventory();
 						
 						WebUIHandler.setupStaffCoreUI(p);
@@ -295,36 +295,36 @@
 			}
 		}
 		
-		if(e.getView().getTitle().equalsIgnoreCase("§cPlayer-Management")) {
+		if(e.getView().getTitle().equalsIgnoreCase(ChatColor.RED + "Player - Management")) {
 			e.setCancelled(true);
 			
 			if(e.getCurrentItem() != null) {
 				if(e.getCurrentItem().hasItemMeta()) {
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§c◄ Go back")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "◄ Go back")) {
 						manager.openMainMenu(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Manage OnlinePlayers")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Manage OnlinePlayers")) {
 						manager.openOnlinePlayerMenu(p, 1);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§7Protect a player")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GRAY + "Protect a player")) {
 						manager.openProtectionInventory(p, 1);
 					}
 				}
 			}
 		}
 		
-		if(e.getView().getTitle().equalsIgnoreCase("§cManage OnlinePlayers")) {
+		if(e.getView().getTitle().equalsIgnoreCase(ChatColor.RED + "Manage OnlinePlayers")) {
 			e.setCancelled(true);
 			
 			if(e.getCurrentItem() != null) {
 				if(e.getCurrentItem().hasItemMeta()) {
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§c◄ Go back")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "◄ Go back")) {
 						manager.openPlayerManagement(p);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§a◄")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GREEN + "◄")) {
 						manager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()) - 1);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§a►")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.GREEN + "►")) {
 						manager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()) - 1);
 					}
 					if (e.getSlot() > 8 && e.getSlot() < 45) {
@@ -336,26 +336,26 @@
 			}
 		}
 		
-		if(e.getView().getTitle().endsWith("§8- §cStaffCore")) {
+		if(e.getView().getTitle().endsWith(ChatColor.DARK_GRAY + "- " + ChatColor.RED + "StaffCore")) {
 			e.setCancelled(true);
 			
 			if(e.getCurrentItem() != null) {
 				if(e.getCurrentItem().hasItemMeta()) {
-					String s = e.getView().getTitle().replace("§8- §cStaffCore", "");
+					String s = e.getView().getTitle().replace(ChatColor.DARK_GRAY + "- " + ChatColor.RED + "StaffCore", "");
 					String targetname = ChatColor.stripColor(s);
 					
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§c◄ Go back")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "◄ Go back")) {
 						manager.openOnlinePlayerMenu(p, PageManager.page.get(p.getPlayer()));
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§cCheck Player")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "Check Player")) {
 						p.closeInventory();
 						p.performCommand("check " + targetname);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§cMute Player")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "Mute Player")) {
 						p.closeInventory();
 						p.performCommand("mute " + targetname);
 					}
-					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase("§cBan Player")) {
+					if(e.getCurrentItem().getItemMeta().getDisplayName().equalsIgnoreCase(ChatColor.RED + "Ban Player")) {
 						p.closeInventory();
 						p.performCommand("ban " + targetname);
 					}
Index: src/de/lacodev/rsystem/utils/PanelManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.utils;\r\n\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.enchantments.Enchantment;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemFlag;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\nimport org.bukkit.inventory.meta.SkullMeta;\r\nimport org.bukkit.scheduler.BukkitRunnable;\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.enums.XMaterial;\r\nimport de.lacodev.rsystem.mysql.MySQL;\r\n\r\npublic class PanelManager {\r\n\t\r\n\tpublic PanelManager() {\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\tprivate Inventory mainmenu;\r\n\tprivate Inventory playermanagement;\r\n\tprivate Inventory onlineplayermenu;\r\n\tprivate Inventory protect;\r\n\tprivate Inventory playermenu;\r\n\t\r\n\tpublic static Inventory settings;\r\n\t\r\n\tpublic void openMainMenu(Player player) {\r\n\t\tmainmenu = player.getServer().createInventory(null, 27, \"§cStaffCore §8- §7MainMenu\");\r\n\t\t\r\n\t\tfor(int i = 0; i < mainmenu.getSize(); i++) {\r\n\t\t\tmainmenu.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\t\r\n\t\tmainmenu.setItem(10, Data.buildPlayerHead(\"§7Player-Management\", player.getName()));\r\n\t\tmainmenu.setItem(13, Data.buildItem(XMaterial.COMMAND_BLOCK.parseMaterial(), 1, 0, \"§7Settings\"));\r\n\t\t\r\n\t\tmainmenu.setItem(26, Data.buildItemStackLore(Material.PAPER, 1, 0, \"§cReport a Bug\", \"§7If you find any error which\", \"§7might be caused by §cStaffCore\",\"§cReport it with clicking on this item\"));\r\n\t\t\r\n\t\tplayer.openInventory(mainmenu);\r\n\t}\r\n\t\r\n\tpublic void openPlayerManagement(Player player) {\r\n\t\tplayermanagement = player.getServer().createInventory(null, 27, \"§cPlayer-Management\");\r\n\t\t\r\n\t\tfor(int i = 0; i < playermanagement.getSize(); i++) {\r\n\t\t\tplayermanagement.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\t\r\n\t\tplayermanagement.setItem(13, Data.buildPlayerHead(\"§7Manage OnlinePlayers\", player.getName(), \"§7Online §8» §c\" + Bukkit.getOnlinePlayers().size() + \" Player(s)\"));\r\n\t\tplayermanagement.setItem(16, Data.buildItem(XMaterial.DIAMOND_CHESTPLATE, \"§7Protect a player\"));\r\n\t\t\r\n\t\tItemStack menu = Data.getHead(\"arrow\");\r\n\t\tItemMeta meta = menu.getItemMeta();\r\n\t\tmeta.setDisplayName(\"§c◄ Go back\");\r\n\t\tmenu.setItemMeta(meta);\r\n\t\t\r\n\t\tplayermanagement.setItem(18, menu);\r\n\t\t\r\n\t\tplayer.openInventory(playermanagement);\r\n\t}\r\n\t\r\n\tpublic void openOnlinePlayerMenu(Player player, int page) {\r\n\t\tonlineplayermenu = player.getServer().createInventory(null, 54, \"§cManage OnlinePlayers\");\r\n\t\t\r\n\t\tfor(int i = 0; i < 9; i++) {\r\n\t\t\tonlineplayermenu.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\tfor(int i = 45; i < 54; i++) {\r\n\t\t\tonlineplayermenu.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\t\r\n\t\tArrayList<ItemStack> items = new ArrayList<>();\r\n\t\tfor(Player all : Bukkit.getOnlinePlayers()) {\r\n\t\t\titems.add(Data.buildPlayerHead(\"§7\" + all.getName(), all.getName()));\r\n\t\t}\r\n\t\t\r\n\t\tif (PageManager.page.containsKey(player.getPlayer())) {\r\n\t\t\tPageManager.page.remove(player.getPlayer());\r\n\t\t}\r\n\t\tPageManager.page.put(player.getPlayer(), page);\r\n\t\t\r\n\t\tItemStack forward = Data.getHead(\"oak_arrow_right\");\r\n\t\tItemMeta fmeta = forward.getItemMeta();\r\n\t\tfmeta.setDisplayName(\"§a►\");\r\n\t\tforward.setItemMeta(fmeta);\r\n\t\t\r\n\t\tItemStack back = Data.getHead(\"oak_arrow_left\");\r\n\t\tItemMeta bmeta = back.getItemMeta();\r\n\t\tbmeta.setDisplayName(\"§a◄\");\r\n\t\tback.setItemMeta(bmeta);\r\n\t\t\r\n\t\tif (PageManager.isProtectValid(items, page - 1, 36)) {\r\n\t\t\tonlineplayermenu.setItem(46, back);\r\n\t\t}\r\n\r\n\t\tif (PageManager.isProtectValid(items, page + 1, 36)) {\r\n\t\t\tonlineplayermenu.setItem(52, forward);\r\n\t\t}\r\n\r\n\r\n\t\tfor (ItemStack item : PageManager.getPageProtect(items, page, 36)) {\r\n\t\t\tonlineplayermenu.setItem(onlineplayermenu.firstEmpty(), item);\r\n\t\t}\r\n\t\t\r\n\t\tItemStack menu = Data.getHead(\"arrow\");\r\n\t\tItemMeta meta = menu.getItemMeta();\r\n\t\tmeta.setDisplayName(\"§c◄ Go back\");\r\n\t\tmenu.setItemMeta(meta);\r\n\t\t\r\n\t\tonlineplayermenu.setItem(45, menu);\r\n\t\t\r\n\t\tplayer.openInventory(onlineplayermenu);\r\n\t}\r\n\t\r\n\tpublic void openProtectionInventory(Player p, int page) {\r\n\t\tString title = \"§cStaffCore §8- §7Protections\";\r\n\t\tif(title.length() > 32) {\r\n\t\t\ttitle = title.substring(0, 32);\r\n\t\t}\r\n\t\tprotect = p.getServer().createInventory(null, 54, title);\r\n\r\n\r\n\t\tnew BukkitRunnable() {\r\n\r\n\t\t\t@SuppressWarnings(\"deprecation\")\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tif(MySQL.isConnected()) {\r\n\r\n\t\t\t\t\tArrayList<ItemStack> rows = new ArrayList<>();\r\n\t\t\t\t\tResultSet rs = MySQL.getResult(\"SELECT * FROM ReportSystem_playerdb\");\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twhile(rs.next()) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tItemStack player = XMaterial.PLAYER_HEAD.parseItem();\r\n\t\t\t\t\t\t\tSkullMeta meta = (SkullMeta) player.getItemMeta();\r\n\t\t\t\t\t\t\tmeta.setOwner(rs.getString(\"PLAYERNAME\"));\r\n\t\t\t\t\t\t\tif(SystemManager.isProtected(rs.getString(\"UUID\"))) {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + rs.getString(\"PLAYERNAME\") + \" §8| §aProtected\");\r\n\t\t\t\t\t\t\t\tmeta.addItemFlags(ItemFlag.HIDE_ENCHANTS);\r\n\t\t\t\t\t\t\t\tmeta.addEnchant(Enchantment.DURABILITY, 1, true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmeta.setDisplayName(\"§7\" + rs.getString(\"PLAYERNAME\") + \" §8| §cUnprotected\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.setItemMeta(meta);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trows.add(player);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (int i2 = 0; i2 < 9; i2++) {\r\n\t\t\t\t\t\tprotect.setItem(i2, Data.buildPlace());\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (PageManager.page.containsKey(p.getPlayer())) {\r\n\t\t\t\t\t\tPageManager.page.remove(p.getPlayer());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPageManager.page.put(p.getPlayer(), page);\r\n\r\n\t\t\t\t\tfor (int i2 = 45; i2 < 54; i2++) {\r\n\t\t\t\t\t\tprotect.setItem(i2, Data.buildPlace());\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tItemStack forward = Data.getHead(\"oak_arrow_right\");\r\n\t\t\t\t\tItemMeta fmeta = forward.getItemMeta();\r\n\t\t\t\t\tfmeta.setDisplayName(\"§a►\");\r\n\t\t\t\t\tforward.setItemMeta(fmeta);\r\n\t\t\t\t\t\r\n\t\t\t\t\tItemStack back = Data.getHead(\"oak_arrow_left\");\r\n\t\t\t\t\tItemMeta bmeta = back.getItemMeta();\r\n\t\t\t\t\tbmeta.setDisplayName(\"§a◄\");\r\n\t\t\t\t\tback.setItemMeta(bmeta);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (PageManager.isProtectValid(rows, page - 1, 36)) {\r\n\t\t\t\t\t\tprotect.setItem(46, back);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (PageManager.isProtectValid(rows, page + 1, 36)) {\r\n\t\t\t\t\t\tprotect.setItem(52, forward);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfor (ItemStack item : PageManager.getPageProtect(rows, page, 36)) {\r\n\t\t\t\t\t\tprotect.setItem(protect.firstEmpty(), item);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprotect.setItem(13, Data.buildItem(Material.BARRIER, 1, 0, \"§cNo Connection\"));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tItemStack menu = Data.getHead(\"arrow\");\r\n\t\t\t\tItemMeta meta = menu.getItemMeta();\r\n\t\t\t\tmeta.setDisplayName(\"§c◄ Go back\");\r\n\t\t\t\tmenu.setItemMeta(meta);\r\n\t\t\t\t\r\n\t\t\t\tprotect.setItem(45, menu);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}.runTaskAsynchronously(Main.getInstance());\r\n\r\n\t\tp.openInventory(protect);\r\n\t}\r\n\t\r\n\tpublic void openPlayerMenu(Player p, String target) {\r\n\t\tplayermenu = p.getServer().createInventory(null, 9, target + \"§8- §cStaffCore\");\r\n\t\t\r\n\t\tfor(int i = 0; i < 9; i++) {\r\n\t\t\tplayermenu.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\t\r\n\t\tItemStack menu = Data.getHead(\"arrow\");\r\n\t\tItemMeta meta = menu.getItemMeta();\r\n\t\tmeta.setDisplayName(\"§c◄ Go back\");\r\n\t\tmenu.setItemMeta(meta);\r\n\t\t\r\n\t\tplayermenu.setItem(0, menu);\r\n\t\t\r\n\t\tplayermenu.setItem(3, Data.buildItemStack(XMaterial.EXPERIENCE_BOTTLE, \"§cCheck Player\", \"§7Get all important information\", \"§7about the player\"));\r\n\t\tplayermenu.setItem(5, Data.buildItem(XMaterial.BOOK, \"§cMute Player\"));\r\n\t\tplayermenu.setItem(7, Data.buildItem(XMaterial.RED_DYE, \"§cBan Player\"));\r\n\t\t\r\n\t\tp.openInventory(playermenu);\r\n\t}\r\n\t\r\n\tpublic void openSettingsMenu(Player p) {\r\n\t\tsettings = p.getServer().createInventory(null, 54, \"§cStaffCore §8- §7Settings\");\r\n\t\t\r\n\t\tfor(int i = 0; i < 54; i++) {\r\n\t\t\tsettings.setItem(i, Data.buildPlace());\r\n\t\t}\r\n\t\t\r\n\t\tsettings.setItem(12, Data.buildHead(\"globe\", \"§aDownload Latest Release\",\"§7This will download the latest release\",\"§7which has been §asuccessfully tested §7in it's current state\"));\r\n\t\tsettings.setItem(14, Data.buildHead(\"warn\", \"§6Download Latest Experimental\",\"§7This will download the latest dev-build\",\"§7which is §cnot finished §7in it's current state\"));\r\n\t\t\r\n\t\tsettings.setItem(29, Data.buildHead(\"oak_arrow_left\", \"§a◄\"));\r\n\t\t\r\n\t\tsettings.setItem(31, getLanguageHead());\r\n\t\t\r\n\t\tsettings.setItem(33, Data.buildHead(\"oak_arrow_right\", \"§a►\"));\r\n\t\t\r\n\t\tsettings.setItem(45, Data.buildHead(\"arrow\", \"§c◄ Go back\"));\r\n\t\tsettings.setItem(49, Data.buildHead(\"reload\", \"§7Reload §cStaffCore\", \"§7This will completly restart StaffCore\", \"§7including MySQL reconnect and Config reload\"));\r\n\t\tsettings.setItem(53, Data.buildHead(\"webui\", \"§7Setup §cStaffCore-UI\", \"§7This will create all MySQL-Tables which\", \"§7are required for StaffCore-UI to work!\"));\r\n\t\t\r\n\t\tp.openInventory(settings);\r\n\t}\r\n\t\r\n\tpublic ItemStack getLanguageHead() {\r\n\t\treturn Data.buildHead(Main.getInstance().getConfig().getString(\"General.Language\"), \"§a\" + Main.getInstance().getConfig().getString(\"General.Language\"));\r\n\t}\r\n\r\n\tpublic Inventory getMainMenu() {\r\n\t\treturn mainmenu;\r\n\t}\r\n\t\r\n\tpublic Inventory getPlayerManagement() {\r\n\t\treturn playermanagement;\r\n\t}\r\n\t\r\n\tpublic Inventory getOnlinePlayerMenu() {\r\n\t\treturn onlineplayermenu;\r\n\t}\r\n\t\r\n\tpublic Inventory getProtectMenu() {\r\n\t\treturn protect;\r\n\t}\r\n\t\r\n\tpublic Inventory getPlayerMenu() {\r\n\t\treturn playermenu;\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/de/lacodev/rsystem/utils/PanelManager.java b/src/de/lacodev/rsystem/utils/PanelManager.java
--- a/src/de/lacodev/rsystem/utils/PanelManager.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/utils/PanelManager.java	(date 1610274612133)
@@ -4,7 +4,9 @@
 import java.sql.SQLException;
 import java.util.ArrayList;
 
+import net.milkbowl.vault.chat.Chat;
 import org.bukkit.Bukkit;
+import org.bukkit.ChatColor;
 import org.bukkit.Material;
 import org.bukkit.enchantments.Enchantment;
 import org.bukkit.entity.Player;
@@ -33,33 +35,34 @@
 	public static Inventory settings;
 	
 	public void openMainMenu(Player player) {
-		mainmenu = player.getServer().createInventory(null, 27, "§cStaffCore §8- §7MainMenu");
-		
+		//mainmenu = player.getServer().createInventory(null, 27, "§cStaffCore §8- §7MainMenu");
+		mainmenu = player.getServer().createInventory(null, 27, ChatColor.RED + "Staffcore" + ChatColor.DARK_GRAY + " - " + ChatColor.GRAY + "MainMenu");
+
 		for(int i = 0; i < mainmenu.getSize(); i++) {
 			mainmenu.setItem(i, Data.buildPlace());
 		}
 		
-		mainmenu.setItem(10, Data.buildPlayerHead("§7Player-Management", player.getName()));
-		mainmenu.setItem(13, Data.buildItem(XMaterial.COMMAND_BLOCK.parseMaterial(), 1, 0, "§7Settings"));
+		mainmenu.setItem(10, Data.buildPlayerHead(ChatColor.GRAY + "Player-Management", player.getName()));
+		mainmenu.setItem(13, Data.buildItem(XMaterial.COMMAND_BLOCK.parseMaterial(), 1, 0, ChatColor.GRAY + "Settings"));
 		
-		mainmenu.setItem(26, Data.buildItemStackLore(Material.PAPER, 1, 0, "§cReport a Bug", "§7If you find any error which", "§7might be caused by §cStaffCore","§cReport it with clicking on this item"));
+		mainmenu.setItem(26, Data.buildItemStackLore(Material.PAPER, 1, 0, ChatColor.RED + "Report a Bug", ChatColor.GRAY + "If you find any error which", ChatColor.GRAY + "might be caused by " + ChatColor.RED + "StaffCore",ChatColor.GRAY + "Report it with clicking on this item"));
 		
 		player.openInventory(mainmenu);
 	}
 	
 	public void openPlayerManagement(Player player) {
-		playermanagement = player.getServer().createInventory(null, 27, "§cPlayer-Management");
-		
+		playermanagement = player.getServer().createInventory(null, 27, ChatColor.RED + "Player - Management");
+
 		for(int i = 0; i < playermanagement.getSize(); i++) {
 			playermanagement.setItem(i, Data.buildPlace());
 		}
 		
-		playermanagement.setItem(13, Data.buildPlayerHead("§7Manage OnlinePlayers", player.getName(), "§7Online §8» §c" + Bukkit.getOnlinePlayers().size() + " Player(s)"));
-		playermanagement.setItem(16, Data.buildItem(XMaterial.DIAMOND_CHESTPLATE, "§7Protect a player"));
+		playermanagement.setItem(13, Data.buildPlayerHead(ChatColor.GRAY + "Manage OnlinePlayers", player.getName(), ChatColor.GRAY + "Online "+ ChatColor.DARK_GRAY + "» " + ChatColor.RED + Bukkit.getOnlinePlayers().size() + " Player(s)"));
+		playermanagement.setItem(16, Data.buildItem(XMaterial.DIAMOND_CHESTPLATE, ChatColor.GRAY + "Protect a player"));
 		
 		ItemStack menu = Data.getHead("arrow");
 		ItemMeta meta = menu.getItemMeta();
-		meta.setDisplayName("§c◄ Go back");
+		meta.setDisplayName(ChatColor.RED + "◄ Go back");
 		menu.setItemMeta(meta);
 		
 		playermanagement.setItem(18, menu);
@@ -68,7 +71,7 @@
 	}
 	
 	public void openOnlinePlayerMenu(Player player, int page) {
-		onlineplayermenu = player.getServer().createInventory(null, 54, "§cManage OnlinePlayers");
+		onlineplayermenu = player.getServer().createInventory(null, 54, ChatColor.RED + "Manage OnlinePlayers");
 		
 		for(int i = 0; i < 9; i++) {
 			onlineplayermenu.setItem(i, Data.buildPlace());
@@ -79,7 +82,7 @@
 		
 		ArrayList<ItemStack> items = new ArrayList<>();
 		for(Player all : Bukkit.getOnlinePlayers()) {
-			items.add(Data.buildPlayerHead("§7" + all.getName(), all.getName()));
+			items.add(Data.buildPlayerHead(ChatColor.GRAY + all.getName(), all.getName()));
 		}
 		
 		if (PageManager.page.containsKey(player.getPlayer())) {
@@ -89,12 +92,12 @@
 		
 		ItemStack forward = Data.getHead("oak_arrow_right");
 		ItemMeta fmeta = forward.getItemMeta();
-		fmeta.setDisplayName("§a►");
+		fmeta.setDisplayName(ChatColor.GREEN + "►");
 		forward.setItemMeta(fmeta);
 		
 		ItemStack back = Data.getHead("oak_arrow_left");
 		ItemMeta bmeta = back.getItemMeta();
-		bmeta.setDisplayName("§a◄");
+		bmeta.setDisplayName(ChatColor.GREEN + "◄");
 		back.setItemMeta(bmeta);
 		
 		if (PageManager.isProtectValid(items, page - 1, 36)) {
@@ -112,7 +115,7 @@
 		
 		ItemStack menu = Data.getHead("arrow");
 		ItemMeta meta = menu.getItemMeta();
-		meta.setDisplayName("§c◄ Go back");
+		meta.setDisplayName(ChatColor.RED + "◄ Go back");
 		menu.setItemMeta(meta);
 		
 		onlineplayermenu.setItem(45, menu);
@@ -121,7 +124,8 @@
 	}
 	
 	public void openProtectionInventory(Player p, int page) {
-		String title = "§cStaffCore §8- §7Protections";
+		String title = ChatColor.RED + "StaffCore " + ChatColor.DARK_GRAY + "- " + ChatColor.GRAY + "Protections";
+
 		if(title.length() > 32) {
 			title = title.substring(0, 32);
 		}
@@ -144,11 +148,11 @@
 							SkullMeta meta = (SkullMeta) player.getItemMeta();
 							meta.setOwner(rs.getString("PLAYERNAME"));
 							if(SystemManager.isProtected(rs.getString("UUID"))) {
-								meta.setDisplayName("§7" + rs.getString("PLAYERNAME") + " §8| §aProtected");
+								meta.setDisplayName(ChatColor.GRAY + rs.getString("PLAYERNAME") + ChatColor.DARK_GRAY + " | " + ChatColor.GREEN + "Protected");
 								meta.addItemFlags(ItemFlag.HIDE_ENCHANTS);
 								meta.addEnchant(Enchantment.DURABILITY, 1, true);
 							} else {
-								meta.setDisplayName("§7" + rs.getString("PLAYERNAME") + " §8| §cUnprotected");
+								meta.setDisplayName(ChatColor.GRAY + rs.getString("PLAYERNAME") + ChatColor.DARK_GRAY + " | " + ChatColor.RED + "Unprotected");
 							}
 							player.setItemMeta(meta);
 							
@@ -171,15 +175,15 @@
 					for (int i2 = 45; i2 < 54; i2++) {
 						protect.setItem(i2, Data.buildPlace());
 					}
-					
+					// TODO: 09.01.2021 ChatCOlor 
 					ItemStack forward = Data.getHead("oak_arrow_right");
 					ItemMeta fmeta = forward.getItemMeta();
-					fmeta.setDisplayName("§a►");
+					fmeta.setDisplayName(ChatColor.GREEN + "►");
 					forward.setItemMeta(fmeta);
 					
 					ItemStack back = Data.getHead("oak_arrow_left");
 					ItemMeta bmeta = back.getItemMeta();
-					bmeta.setDisplayName("§a◄");
+					bmeta.setDisplayName(ChatColor.GREEN + "◄");
 					back.setItemMeta(bmeta);
 					
 					if (PageManager.isProtectValid(rows, page - 1, 36)) {
@@ -195,12 +199,12 @@
 						protect.setItem(protect.firstEmpty(), item);
 					}
 				} else {
-					protect.setItem(13, Data.buildItem(Material.BARRIER, 1, 0, "§cNo Connection"));
+					protect.setItem(13, Data.buildItem(Material.BARRIER, 1, 0, ChatColor.RED + "No Connection"));
 				}
 				
 				ItemStack menu = Data.getHead("arrow");
 				ItemMeta meta = menu.getItemMeta();
-				meta.setDisplayName("§c◄ Go back");
+				meta.setDisplayName(ChatColor.RED + "◄ Go back");
 				menu.setItemMeta(meta);
 				
 				protect.setItem(45, menu);
@@ -212,7 +216,7 @@
 	}
 	
 	public void openPlayerMenu(Player p, String target) {
-		playermenu = p.getServer().createInventory(null, 9, target + "§8- §cStaffCore");
+		playermenu = p.getServer().createInventory(null, 9, target + ChatColor.DARK_GRAY + "- " + ChatColor.RED + "StaffCore");
 		
 		for(int i = 0; i < 9; i++) {
 			playermenu.setItem(i, Data.buildPlace());
@@ -225,38 +229,38 @@
 		
 		playermenu.setItem(0, menu);
 		
-		playermenu.setItem(3, Data.buildItemStack(XMaterial.EXPERIENCE_BOTTLE, "§cCheck Player", "§7Get all important information", "§7about the player"));
-		playermenu.setItem(5, Data.buildItem(XMaterial.BOOK, "§cMute Player"));
-		playermenu.setItem(7, Data.buildItem(XMaterial.RED_DYE, "§cBan Player"));
+		playermenu.setItem(3, Data.buildItemStack(XMaterial.EXPERIENCE_BOTTLE, ChatColor.RED + "Check Player", ChatColor.GRAY + "Get all important information", ChatColor.GRAY + "about the player"));
+		playermenu.setItem(5, Data.buildItem(XMaterial.BOOK, ChatColor.RED + "Mute Player"));
+		playermenu.setItem(7, Data.buildItem(XMaterial.RED_DYE, ChatColor.RED + "Ban Player"));
 		
 		p.openInventory(playermenu);
 	}
 	
 	public void openSettingsMenu(Player p) {
-		settings = p.getServer().createInventory(null, 54, "§cStaffCore §8- §7Settings");
+		settings = p.getServer().createInventory(null, 54, ChatColor.RED + "StaffCore " + ChatColor.DARK_GRAY + "- " + ChatColor.GRAY + "Settings");
 		
 		for(int i = 0; i < 54; i++) {
 			settings.setItem(i, Data.buildPlace());
 		}
 		
-		settings.setItem(12, Data.buildHead("globe", "§aDownload Latest Release","§7This will download the latest release","§7which has been §asuccessfully tested §7in it's current state"));
-		settings.setItem(14, Data.buildHead("warn", "§6Download Latest Experimental","§7This will download the latest dev-build","§7which is §cnot finished §7in it's current state"));
+		settings.setItem(12, Data.buildHead("globe", ChatColor.GREEN + "Download Latest Release",ChatColor.GRAY + "This will download the latest release",ChatColor.GRAY + "which has been " + ChatColor.GREEN + "successfully tested " + ChatColor.GRAY + "in it's current state"));
+		settings.setItem(14, Data.buildHead("warn", ChatColor.GOLD + "Download Latest Experimental",ChatColor.GRAY + "This will download the latest dev-build",ChatColor.GRAY + "which is " + ChatColor.RED + "not finished " + ChatColor.GRAY + "in it's current state"));
 		
-		settings.setItem(29, Data.buildHead("oak_arrow_left", "§a◄"));
+		settings.setItem(29, Data.buildHead("oak_arrow_left", ChatColor.GREEN + "◄"));
 		
 		settings.setItem(31, getLanguageHead());
 		
-		settings.setItem(33, Data.buildHead("oak_arrow_right", "§a►"));
+		settings.setItem(33, Data.buildHead("oak_arrow_right", ChatColor.GREEN + "►"));
 		
-		settings.setItem(45, Data.buildHead("arrow", "§c◄ Go back"));
-		settings.setItem(49, Data.buildHead("reload", "§7Reload §cStaffCore", "§7This will completly restart StaffCore", "§7including MySQL reconnect and Config reload"));
-		settings.setItem(53, Data.buildHead("webui", "§7Setup §cStaffCore-UI", "§7This will create all MySQL-Tables which", "§7are required for StaffCore-UI to work!"));
+		settings.setItem(45, Data.buildHead("arrow", ChatColor.RED + "◄ Go back"));
+		settings.setItem(49, Data.buildHead("reload", ChatColor.GRAY + "Reload " + ChatColor.RED + "StaffCore", ChatColor.GRAY + "This will completly restart StaffCore", ChatColor.GRAY + "including MySQL reconnect and Config reload"));
+		settings.setItem(53, Data.buildHead("webui", ChatColor.GRAY + "Setup " + ChatColor.RED + "StaffCore-UI", ChatColor.GRAY + "This will create all MySQL-Tables which", ChatColor.GRAY + "are required for StaffCore-UI to work!"));
 		
 		p.openInventory(settings);
 	}
 	
 	public ItemStack getLanguageHead() {
-		return Data.buildHead(Main.getInstance().getConfig().getString("General.Language"), "§a" + Main.getInstance().getConfig().getString("General.Language"));
+		return Data.buildHead(Main.getInstance().getConfig().getString("General.Language"), ChatColor.GREEN + Main.getInstance().getConfig().getString("General.Language"));
 	}
 
 	public Inventory getMainMenu() {
Index: src/de/lacodev/rsystem/commands/CMD_StaffCore.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.commands;\r\n\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.utils.PanelManager;\r\nimport de.lacodev.rsystem.utils.SystemManager;\r\n\r\npublic class CMD_StaffCore implements CommandExecutor {\r\n\r\n\t@Override\r\n\tpublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\r\n\r\n\t\tif(sender instanceof Player) {\r\n\t\t\t\r\n\t\t\tPlayer p = (Player)sender;\r\n\t\t\t\r\n\t\t\tif(args.length == 1) {\r\n\t\t\t\tif(args[0].toLowerCase().equalsIgnoreCase(\"gui\")) {\r\n\t\t\t\t\tif(p.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\")) || p.hasPermission(Main.getPermissionNotice(\"Permissions.System.Adminpanel\"))) {\r\n\t\t\t\t\t\tPanelManager manager = new PanelManager();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmanager.openMainMenu(p);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(Main.getInstance().experimental == true) {\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t\t\t} else if(Main.getInstance().latest == true) {\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7/staffcore gui §8| §7To open the adminconsole\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8Created by: §7LacoDev and Esmaybe\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(Main.getInstance().experimental == true) {\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t\t} else if(Main.getInstance().latest == true) {\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7/staffcore gui §8| §7To open the adminconsole\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8Created by: §7LacoDev and Esmaybe\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tp.sendMessage(\"\");\r\n\t\t\t\tif(Main.getInstance().experimental == true) {\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(Main.getInstance().latest == true) {\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7/staffcore gui §8| §7To open the adminconsole\");\r\n\t\t\t\t}\r\n\t\t\t\tp.sendMessage(Main.getPrefix() + \"§8Created by: §7LacoDev and Esmaybe\");\r\n\t\t\t\tp.sendMessage(\"\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tif(args.length == 1) {\r\n\t\t\t\tif(args[0].toLowerCase().equalsIgnoreCase(\"reload\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tSystemManager.reloadStaffCore(sender);\r\n\t\t\t\t\t\r\n\t\t\t\t} else if(args[0].toLowerCase().equalsIgnoreCase(\"update\")) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!Main.getInstance().latest) {\r\n\t\t\t\t\t\tif(!Main.getInstance().experimental) {\r\n\t\t\t\t\t\t\tSystemManager.downloadLatestVersion(sender);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsender.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Version.Experimental\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsender.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Version.Latest\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsender.sendMessage(\"\");\r\n\t\t\t\tif(Main.getInstance().experimental == true) {\r\n\t\t\t\t\tsender.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§dEXPERIMENTAL§8)\");\r\n\t\t\t\t} else if(Main.getInstance().latest == true) {\r\n\t\t\t\t\tsender.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§aLATEST§8)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsender.sendMessage(Main.getPrefix() + \"§8StaffCore: §7v\" + Main.getInstance().getDescription().getVersion() + \"§8(§cOUTDATED§8)\");\r\n\t\t\t\t\tsender.sendMessage(Main.getPrefix() + \"§7/staffcore gui §8| §7To open the adminconsole\");\r\n\t\t\t\t}\r\n\t\t\t\tsender.sendMessage(Main.getPrefix() + \"§8Created by: §7LacoDev and ViaEnder\");\r\n\t\t\t\tsender.sendMessage(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/commands/CMD_StaffCore.java b/src/de/lacodev/rsystem/commands/CMD_StaffCore.java
--- a/src/de/lacodev/rsystem/commands/CMD_StaffCore.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/commands/CMD_StaffCore.java	(date 1610231909149)
@@ -18,7 +18,7 @@
 			Player p = (Player)sender;
 			
 			if(args.length == 1) {
-				if(args[0].toLowerCase().equalsIgnoreCase("gui")) {
+				if(args[0].equalsIgnoreCase("gui")) {
 					if(p.hasPermission(Main.getPermissionNotice("Permissions.Everything")) || p.hasPermission(Main.getPermissionNotice("Permissions.System.Adminpanel"))) {
 						PanelManager manager = new PanelManager();
 						
@@ -32,7 +32,7 @@
 							p.sendMessage(Main.getPrefix() + "§8StaffCore: §7v" + Main.getInstance().getDescription().getVersion() + "§8(§cOUTDATED§8)");
 							p.sendMessage(Main.getPrefix() + "§7/staffcore gui §8| §7To open the adminconsole");
 						}
-						p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and Esmaybe");
+						p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and ViaEnder");
 					}
 				} else {
 					if(Main.getInstance().experimental == true) {
@@ -43,7 +43,7 @@
 						p.sendMessage(Main.getPrefix() + "§8StaffCore: §7v" + Main.getInstance().getDescription().getVersion() + "§8(§cOUTDATED§8)");
 						p.sendMessage(Main.getPrefix() + "§7/staffcore gui §8| §7To open the adminconsole");
 					}
-					p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and Esmaybe");
+					p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and ViaEnder");
 				}
 			} else {
 				p.sendMessage("");
@@ -55,7 +55,7 @@
 					p.sendMessage(Main.getPrefix() + "§8StaffCore: §7v" + Main.getInstance().getDescription().getVersion() + "§8(§cOUTDATED§8)");
 					p.sendMessage(Main.getPrefix() + "§7/staffcore gui §8| §7To open the adminconsole");
 				}
-				p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and Esmaybe");
+				p.sendMessage(Main.getPrefix() + "§8Created by: §7LacoDev and ViaEnder");
 				p.sendMessage("");
 			}
 			
Index: src/de/lacodev/rsystem/listeners/Listener_Chat.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.lacodev.rsystem.listeners;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.configuration.file.YamlConfiguration;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.player.AsyncPlayerChatEvent;\r\nimport org.bukkit.event.player.PlayerCommandPreprocessEvent;\r\n\r\nimport de.lacodev.rsystem.Main;\r\nimport de.lacodev.rsystem.utils.BanManager;\r\nimport de.lacodev.rsystem.utils.InventoryHandler;\r\nimport de.lacodev.rsystem.utils.ReportManager;\r\n\r\npublic class Listener_Chat implements Listener {\r\n\t\r\n\tpublic static HashMap<Player, Long> spam = new HashMap<>();\r\n\t\r\n\t@EventHandler\r\n\tpublic void onChat(AsyncPlayerChatEvent e) {\r\n\t\tPlayer p = e.getPlayer();\r\n\t\t/*String[] args = e.getMessage().split(\" \");\r\n\r\n\t\tif (args[0].equalsIgnoreCase(\"@staff\")) {\r\n\r\n\t\t\tif(p.hasPermission(Main.getPermissionNotice(\"Permissions.StaffChat.Chat\")) || p.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\"))) {\r\n\r\n\t\t\t\t//AB hier ist es offen\r\n\r\n\t\t\t\tfor (Player staffs : Bukkit.getServer().getOnlinePlayers()){\r\n\t\t\t\t\tif(staffs.hasPermission(Main.getPermissionNotice(\"Permissions.StaffChat.Chat\")) || staffs.hasPermission(Main.getPermissionNotice(\"Permissions.Everything\"))) {\r\n\t\t\t\t\t\tstaffs.sendMessage(\"§8[§4StaffChat§8]§b \" + p.getName() + \" §7: \" + e.getMessage().replace(args[0], \"\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.No-Permission\")\r\n\t\t\t\t\t\t.replace(\"%permission%\", Main.getPermissionNotice(\"Permissions.StaffChat.Chat\")));\r\n\r\n\t\t\t}\r\n\r\n\t\t\te.setCancelled(true);\r\n\t\t}else {*/\r\n\r\n\t\t\tif (BanManager.isMuted(p.getUniqueId().toString())) {\r\n\r\n\t\t\t\tp.sendMessage(Main.getMSG(\"Messages.Layouts.Mute\").replace(\"%reason%\", BanManager.getMuteReason(p.getUniqueId().toString())).replace(\"%remaining%\", BanManager.getMuteFinalEnd(p.getUniqueId().toString())));\r\n\t\t\t\te.setCancelled(true);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tFile file = new File(\"plugins//\" + Main.getInstance().getDescription().getName() + \"//chatfilter.yml\");\r\n\t\t\tYamlConfiguration cfg = YamlConfiguration.loadConfiguration(file);\r\n\r\n\t\t\tif (cfg.contains(\"Cursed-Words\")) {\r\n\t\t\t\tif (wordIsBlocked(e.getMessage())) {\r\n\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Cursed-Words.AutoReport.Enable\")) {\r\n\t\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Cursed-Words.Block-Message.Enable\")) {\r\n\t\t\t\t\t\t\tReportManager.createReport(Main.getPermissionNotice(\"Chatfilter.ReporterName\"), p, Main.getPermissionNotice(\"Chatfilter.Cursed-Words.AutoReport.Reason\"));\r\n\t\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Cursed-Words.Block\"));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tReportManager.createReport(Main.getPermissionNotice(\"Chatfilter.ReporterName\"), p, Main.getPermissionNotice(\"Chatfilter.Cursed-Words.AutoReport.Reason\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Cursed-Words.Block-Message\")) {\r\n\t\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Cursed-Words.Block\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (InventoryHandler.filter.contains(p)) {\r\n\r\n\t\t\t\tArrayList<String> cursed = (ArrayList<String>) cfg.getStringList(\"Cursed-Words\");\r\n\r\n\t\t\t\tif (!cursed.contains(e.getMessage())) {\r\n\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\tcursed.add(e.getMessage());\r\n\t\t\t\t\tcfg.set(\"Cursed-Words\", cursed);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tcfg.save(file);\r\n\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.sendMessage(Main.getPrefix() + \"§7Word §aadded §7to the Cursed-Words\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tArrayList<String> ad = (ArrayList<String>) Main.getInstance().getConfig().getStringList(\"Chatfilter.Advertisment.Whitelist\");\r\n\t\t\tArrayList<String> blocked = (ArrayList<String>) Main.getInstance().getConfig().getStringList(\"Chatfilter.Advertisment.Blocked-Domains\");\r\n\r\n\t\t\tString[] adtest = e.getMessage().split(\" \");\r\n\r\n\t\t\tfor (String ads : adtest) {\r\n\t\t\t\tif (!ad.contains(ads)) {\r\n\t\t\t\t\tif (blocked.contains(ads)) {\r\n\t\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Advertisment.AutoReport.Enable\")) {\r\n\t\t\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Advertisment.Block-Message.Enable\")) {\r\n\t\t\t\t\t\t\t\tReportManager.createReport(Main.getPermissionNotice(\"Chatfilter.ReporterName\"), p, Main.getPermissionNotice(\"Chatfilter.Advertisment.AutoReport.Reason\"));\r\n\t\t\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Advertisment.Block\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tReportManager.createReport(Main.getPermissionNotice(\"Chatfilter.ReporterName\"), p, Main.getPermissionNotice(\"Chatfilter.Advertisment.AutoReport.Reason\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (Main.getInstance().getConfig().getBoolean(\"Chatfilter.Advertisment.Block-Message\")) {\r\n\t\t\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.System.Advertisment.Block\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t//}\r\n\t}\r\n\r\n\tprivate boolean wordIsBlocked(String message) {\r\n\t\tFile file = new File(\"plugins//\" + Main.getInstance().getDescription().getName() + \"//chatfilter.yml\");\r\n\t\tYamlConfiguration cfg = YamlConfiguration.loadConfiguration(file);\r\n\t\t\r\n\t\tArrayList<String> cursed = (ArrayList<String>) cfg.getStringList(\"Cursed-Words\");\r\n\t\t\r\n\t\tfor(int i = 0; i < cursed.size(); i++) {\r\n\t\t\tint minpercent = Main.getInstance().getConfig().getInt(\"Chatfilter.Cursed-Words.Match-for-action-in-Percentage\");\r\n\t\t\tString[] msg = message.split(\" \");\r\n\t\t\tfor(String m : msg) {\r\n\t\t\t\tif(cursed.get(i).toLowerCase().contains(m.toLowerCase())) {\r\n\t\t\t\t\tdouble total = cursed.get(i).length();\r\n\t\t\t\t\tdouble score = m.length();\r\n\t\t\t\t\tfloat percentage = (float) ((score * 100) / total);\r\n\t\t\t\t\tif(percentage > minpercent) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@EventHandler\r\n\tpublic void onReport(PlayerCommandPreprocessEvent e) {\r\n\t\tPlayer p = e.getPlayer();\r\n\t\t\r\n\t\tif(!e.getMessage().startsWith(\"/report templates\")) {\r\n\t\t\tif(e.getMessage().startsWith(\"/report \")) {\r\n\t\t\t\tif(spam.containsKey(p)) {\r\n\t\t\t\t\tif(spam.get(p) > System.currentTimeMillis()) {\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Report-System.AntiSpam\"));\r\n\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(e.getMessage().startsWith(\"/ticket create\")) {\r\n\t\t\t\tif(spam.containsKey(p)) {\r\n\t\t\t\t\tif(spam.get(p) > System.currentTimeMillis()) {\r\n\t\t\t\t\t\tp.sendMessage(Main.getPrefix() + Main.getMSG(\"Messages.Ticket-System.Antispam\"));\r\n\t\t\t\t\t\te.setCancelled(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/de/lacodev/rsystem/listeners/Listener_Chat.java b/src/de/lacodev/rsystem/listeners/Listener_Chat.java
--- a/src/de/lacodev/rsystem/listeners/Listener_Chat.java	(revision d9c3694ecdae04ab8127a05e58c3c104404cea10)
+++ b/src/de/lacodev/rsystem/listeners/Listener_Chat.java	(date 1610227214977)
@@ -48,7 +48,12 @@
 
 			e.setCancelled(true);
 		}else {*/
-
+		if (BanManager.isGMute()){
+			if(!(p.hasPermission(Main.getPermissionNotice("Permissions.Everything")) || p.hasPermission(Main.getPermissionNotice("Permissions.Mute.Global.Write")) )) {
+				p.sendMessage(Main.getPrefix() + Main.getMSG("Messages.Global-Mute-System.Message-when-a-player-writes-on-GlobalMute"));
+				e.setCancelled(true);
+			}
+		}else {
 			if (BanManager.isMuted(p.getUniqueId().toString())) {
 
 				p.sendMessage(Main.getMSG("Messages.Layouts.Mute").replace("%reason%", BanManager.getMuteReason(p.getUniqueId().toString())).replace("%remaining%", BanManager.getMuteFinalEnd(p.getUniqueId().toString())));
@@ -123,6 +128,7 @@
 					}
 				}
 			}
+		}
 		//}
 	}
 
